{"config":{"lang":["en"],"separator":"[\\s\\u200b\\-_,:!=\\[\\]()\"`/]+|\\.(?!\\d)|&[lg]t;|(?!\\b)(?=[A-Z][a-z])","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"FastAPI Fullstack","text":"FastAPI Fullstack <p> Production-Ready AI/LLM Applications \u2014 In Minutes, Not Weeks </p> <p> </p> <p>FastAPI Fullstack is a production-ready project generator for AI/LLM applications with 25+ enterprise integrations. Built with FastAPI, Next.js 15, and your choice of AI framework.</p> <p>Generate complete, type-safe applications with authentication, WebSocket streaming, observability, and deployment configs \u2014 all in minutes.</p>"},{"location":"#why-fastapi-fullstack","title":"Why FastAPI Fullstack?","text":"<ol> <li> <p>AI-First Design: Native support for PydanticAI, LangChain, LangGraph, CrewAI with WebSocket streaming and conversation persistence.</p> </li> <li> <p>Production Ready: 100% test coverage, strict typing, Docker/Kubernetes configs, and battle-tested in real applications.</p> </li> <li> <p>25+ Integrations: PostgreSQL, MongoDB, Redis, Celery, Logfire, Sentry, Prometheus, S3, and more \u2014 all optional and configurable.</p> </li> <li> <p>AI-Agent Friendly: Generated projects include <code>CLAUDE.md</code> and <code>AGENTS.md</code> files optimized for AI coding assistants.</p> </li> </ol>"},{"location":"#quick-start","title":"Quick Start","text":"Bash<pre><code># Install\npip install fastapi-fullstack\n\n# Create project with interactive wizard\nfastapi-fullstack new\n\n# Or use presets\nfastapi-fullstack create my_app --preset ai-agent\n</code></pre>"},{"location":"#supported-ai-frameworks","title":"Supported AI Frameworks","text":"Framework Streaming Observability Providers PydanticAI WebSocket Logfire OpenAI, Anthropic, OpenRouter LangChain WebSocket LangSmith OpenAI, Anthropic LangGraph WebSocket LangSmith OpenAI, Anthropic CrewAI WebSocket Logfire OpenAI, Anthropic"},{"location":"#core-features","title":"Core Features","text":"Feature Description AI Agents PydanticAI, LangChain, LangGraph, CrewAI with tool calling WebSocket Streaming Real-time responses with full event access Authentication JWT + Refresh tokens, API Keys, OAuth2 (Google) Databases PostgreSQL (async), MongoDB (async), SQLite Background Tasks Celery, Taskiq, or ARQ Observability Logfire, LangSmith, Sentry, Prometheus Admin Panel SQLAdmin with authentication Deployment Docker, Kubernetes, GitHub Actions, GitLab CI"},{"location":"#generated-project-structure","title":"Generated Project Structure","text":"Text Only<pre><code>my_project/\n\u251c\u2500\u2500 backend/\n\u2502   \u251c\u2500\u2500 app/\n\u2502   \u2502   \u251c\u2500\u2500 main.py              # FastAPI app\n\u2502   \u2502   \u251c\u2500\u2500 api/routes/v1/       # Versioned endpoints\n\u2502   \u2502   \u251c\u2500\u2500 agents/              # AI agents\n\u2502   \u2502   \u251c\u2500\u2500 services/            # Business logic\n\u2502   \u2502   \u2514\u2500\u2500 repositories/        # Data access\n\u2502   \u251c\u2500\u2500 cli/                     # Django-style commands\n\u2502   \u2514\u2500\u2500 tests/\n\u251c\u2500\u2500 frontend/\n\u2502   \u251c\u2500\u2500 src/\n\u2502   \u2502   \u251c\u2500\u2500 app/                 # Next.js App Router\n\u2502   \u2502   \u251c\u2500\u2500 components/          # React components\n\u2502   \u2502   \u2514\u2500\u2500 hooks/               # useChat, useWebSocket\n\u2502   \u2514\u2500\u2500 e2e/                     # Playwright tests\n\u251c\u2500\u2500 docker-compose.yml\n\u2514\u2500\u2500 Makefile\n</code></pre>"},{"location":"#related-projects","title":"Related Projects","text":"<p>Building advanced AI agents? Check out pydantic-deep - a deep agent framework with planning, filesystem, and subagent capabilities.</p>"},{"location":"#next-steps","title":"Next Steps","text":"<ul> <li>Installation - Get started in minutes</li> <li>Quick Start - Create your first project</li> <li>Architecture - Learn about the project structure</li> <li>AI Agents - Configure AI frameworks</li> </ul>"},{"location":"CHANGELOG/","title":"Changelog","text":"<p>All notable changes to this project will be documented in this file.</p> <p>The format is based on Keep a Changelog, and this project adheres to Semantic Versioning.</p>"},{"location":"CHANGELOG/#0118-2026-02-01","title":"[0.1.18] - 2026-02-01","text":""},{"location":"CHANGELOG/#fixed","title":"Fixed","text":"<ul> <li>Removed macOS <code>.DS_Store</code> artifacts and added <code>.DS_Store</code> to <code>.gitignore</code> (contributed by @vladdoster in #42)</li> </ul>"},{"location":"CHANGELOG/#0117-2026-01-24","title":"[0.1.17] - 2026-01-24","text":""},{"location":"CHANGELOG/#added","title":"Added","text":"<ul> <li>MkDocs Material documentation site with pink theme, Inter/JetBrains Mono fonts</li> <li>New documentation pages:</li> <li><code>docs/index.md</code> - Landing page with quick start and features overview</li> <li><code>docs/installation.md</code> - Installation guide with uv/pip/pipx options</li> <li><code>docs/getting-help.md</code> - FAQ and support resources</li> <li><code>docs/concepts/index.md</code> - Architecture overview with Mermaid diagrams</li> <li><code>docs/guides/quick-start.md</code> - Step-by-step first project guide</li> <li><code>docs/guides/configuration.md</code> - All configuration options</li> <li>GitHub Actions workflow for automatic docs deployment (<code>docs.yml</code>)</li> <li>Custom styling (<code>docs/stylesheets/extra.css</code>) matching pydantic-deep theme</li> <li>GitHub announcement bar in docs header</li> </ul>"},{"location":"CHANGELOG/#changed","title":"Changed","text":"<ul> <li>README.md redesign:</li> <li>New centered header with \"Full-Stack AI Agent Template\" title</li> <li>Reorganized badges: AI frameworks (PydanticAI, LangChain, LangGraph, CrewAI, OpenAI, Anthropic, OpenRouter) moved to Features section</li> <li>Added infrastructure badges: FastAPI, Next.js 15, React 19, TypeScript, Tailwind v4, SQLAlchemy, PostgreSQL, MongoDB, Redis, Celery, Logfire, Sentry, Prometheus, Docker, Kubernetes, GitHub Actions, S3</li> <li>New highlights: \"\ud83e\udd16 PydanticAI \u2022 \ud83e\udd9c LangChain, LangGraph &amp; DeepAgents \u2022 \ud83d\udc65 CrewAI \u2022 \ud83c\udfaf Fully Type-Safe\"</li> <li>Moved <code>CHANGELOG.md</code> from <code>docs/</code> to project root (symlinked in docs)</li> <li>Added <code>docs</code> optional dependency group with mkdocs packages</li> </ul>"},{"location":"CHANGELOG/#0116-2026-01-20","title":"[0.1.16] - 2026-01-20","text":""},{"location":"CHANGELOG/#fixed_1","title":"Fixed","text":"<ul> <li>Logfire Celery instrumentation prompt - Celery instrumentation option now only appears when Celery is selected as background task system (previously caused validation error when selecting the option with Taskiq/ARQ)</li> </ul>"},{"location":"CHANGELOG/#changed_1","title":"Changed","text":"<ul> <li>Prompt order - Background tasks prompt now appears before Logfire prompt to enable dynamic feature filtering</li> </ul>"},{"location":"CHANGELOG/#tests-added","title":"Tests Added","text":"<ul> <li>Test for Celery instrumentation option visibility based on background task selection</li> </ul>"},{"location":"CHANGELOG/#0115-2026-01-18","title":"[0.1.15] - 2026-01-18","text":""},{"location":"CHANGELOG/#added_1","title":"Added","text":""},{"location":"CHANGELOG/#deepagents-framework-support","title":"DeepAgents Framework Support","text":"<ul> <li>DeepAgents as fifth AI framework option alongside PydanticAI, LangChain, LangGraph, and CrewAI</li> <li>New <code>--ai-framework deepagents</code> CLI option for project creation</li> <li>Interactive prompt includes \"DeepAgents\" choice</li> <li>Built-in tools for file operations, code execution, and task management:</li> <li><code>ls</code>, <code>read_file</code>, <code>write_file</code>, <code>edit_file</code>, <code>glob</code>, <code>grep</code></li> <li><code>execute</code> (disabled by default for safety)</li> <li><code>write_todos</code>, <code>task</code> (sub-agents)</li> <li>StateBackend for in-memory file state management</li> <li>Skills support via <code>DEEPAGENTS_SKILLS_PATHS</code> environment variable</li> <li>New template files:</li> <li><code>app/agents/deepagents_assistant.py</code> - DeepAgentsAssistant class with run() and stream()</li> <li>WebSocket route implementation with interrupt handling</li> <li>New cookiecutter variable: <code>use_deepagents</code></li> <li>Dependencies: <code>deepagents&gt;=0.1.0</code></li> </ul>"},{"location":"CHANGELOG/#human-in-the-loop-hitl-support","title":"Human-in-the-Loop (HITL) Support","text":"<ul> <li>Tool approval workflow for DeepAgents allowing users to approve, edit, or reject tool calls</li> <li>Configurable via <code>DEEPAGENTS_INTERRUPT_TOOLS</code> environment variable:</li> <li>Comma-separated tool names (e.g., <code>write_file,edit_file,execute</code>)</li> <li>Or <code>all</code> to require approval for all tools</li> <li>Frontend tool approval dialog (<code>tool-approval-dialog.tsx</code>):</li> <li>Shows pending tool calls with JSON args in editable textarea</li> <li>Cancel/Save buttons for editing args</li> <li>Submit button to send decisions</li> <li>Auto-detects changes and sends appropriate decision (approve/edit/reject)</li> <li>WebSocket protocol for interrupt handling:</li> <li>Backend sends <code>tool_approval_required</code> event with action requests</li> <li>Frontend sends <code>resume</code> message with user decisions</li> <li>Thread ID management for state persistence across interrupts</li> <li>New types in <code>chat.ts</code>: <code>ActionRequest</code>, <code>ReviewConfig</code>, <code>PendingApproval</code>, <code>Decision</code></li> <li>Updated hooks (<code>use-chat.ts</code>, <code>use-local-chat.ts</code>) with:</li> <li><code>pendingApproval</code> state</li> <li><code>sendResumeDecisions()</code> function</li> <li>Environment variables:</li> <li><code>DEEPAGENTS_INTERRUPT_TOOLS</code> - tools requiring approval</li> <li><code>DEEPAGENTS_ALLOWED_DECISIONS</code> - allowed decision types (approve, edit, reject)</li> </ul>"},{"location":"CHANGELOG/#fixed_2","title":"Fixed","text":"<ul> <li>OAuth requires JWT authentication - Added validation that OAuth providers (Google) require JWT auth to be enabled, preventing invalid configuration combinations</li> </ul>"},{"location":"CHANGELOG/#changed_2","title":"Changed","text":"<ul> <li><code>AIFrameworkType</code> enum extended with <code>DEEPAGENTS</code> value</li> <li>AI framework prompt now shows five options: PydanticAI, LangChain, LangGraph, CrewAI, DeepAgents</li> <li>LLM provider validation - OpenRouter not supported with DeepAgents (uses LangChain providers directly)</li> <li><code>VARIABLES.md</code> updated with <code>use_deepagents</code> documentation</li> <li>Template <code>CLAUDE.md</code> includes DeepAgents in stack section</li> <li><code>CONTRIBUTING.md</code> updated with correct repository URL</li> </ul>"},{"location":"CHANGELOG/#tests-added_1","title":"Tests Added","text":"<ul> <li>Tests for <code>DEEPAGENTS</code> enum value</li> <li>Tests for DeepAgents + OpenRouter validation (combination is rejected)</li> <li>Tests for <code>use_deepagents</code> computed field</li> <li>Tests for cookiecutter context generation with DeepAgents</li> </ul>"},{"location":"CHANGELOG/#0114-2026-01-16","title":"[0.1.14] - 2026-01-16","text":""},{"location":"CHANGELOG/#fixed_3","title":"Fixed","text":"<ul> <li>Dynamic version reading - <code>fastapi-fullstack --version</code> now correctly displays the version from <code>pyproject.toml</code> using <code>importlib.metadata</code> instead of hardcoded value</li> </ul>"},{"location":"CHANGELOG/#security","title":"Security","text":"<ul> <li>CVE-2026-22701 - Updated <code>filelock</code> to 3.20.3</li> <li>CVE-2026-21441 - Updated <code>urllib3</code> to 2.6.3</li> <li>CVE-2026-22702 - Updated <code>virtualenv</code> to 20.36.1</li> </ul>"},{"location":"CHANGELOG/#0113-2026-01-06","title":"[0.1.13] - 2026-01-06","text":""},{"location":"CHANGELOG/#added_2","title":"Added","text":""},{"location":"CHANGELOG/#comprehensive-configuration-validation","title":"Comprehensive Configuration Validation","text":"<ul> <li>New validation rules to prevent invalid option combinations at config time:</li> <li>WebSocket JWT auth requires main JWT auth to be enabled</li> <li>WebSocket API key auth requires main API key auth to be enabled</li> <li>Admin panel authentication requires JWT auth (for User model)</li> <li>Conversation persistence requires AI agent to be enabled</li> <li>Admin panel requires SQLAlchemy ORM (SQLModel not fully supported by SQLAdmin)</li> <li>Session management requires JWT auth</li> <li>Webhooks require a database to store subscriptions and delivery history</li> <li>Background task queues (Celery/Taskiq/ARQ) require Redis as broker</li> <li>Logfire database instrumentation requires a database</li> <li>Logfire Redis instrumentation requires Redis</li> <li>Logfire Celery instrumentation requires Celery as background task system</li> </ul>"},{"location":"CHANGELOG/#improved-post-generation-instructions","title":"Improved Post-Generation Instructions","text":"<ul> <li>Clearer database setup instructions with warning message:   Text Only<pre><code>\u26a0\ufe0f  Run all commands in order: db-migrate creates the migration, db-upgrade applies it\n</code></pre></li> <li>README.md updated with prominent warning about required migration steps</li> <li>Commands displayed with aligned descriptions for better readability</li> </ul>"},{"location":"CHANGELOG/#dynamic-integration-prompts","title":"Dynamic Integration Prompts","text":"<ul> <li>Context-aware integration options in interactive wizard:</li> <li>Admin Panel option only shown when SQLAlchemy is selected (not SQLModel)</li> <li>Webhooks option only shown when a database is enabled</li> <li>WebSocket auth options filtered based on main auth type selected</li> <li>Clearer ORM selection labels: \"SQLAlchemy \u2014 full control, supports admin panel\" vs \"SQLModel \u2014 less boilerplate, no admin panel support\"</li> <li>Auto-enable Redis when caching is selected (with info message)</li> <li>Better descriptions for all integration options explaining dependencies</li> </ul>"},{"location":"CHANGELOG/#template-improvements","title":"Template Improvements","text":"<ul> <li>ARQ worker service added to <code>docker-compose.prod.yml</code></li> <li>Prometheus labels added to backend service in <code>docker-compose.dev.yml</code></li> <li>OAuth environment variable <code>NEXT_PUBLIC_API_URL</code> added to frontend <code>.env.example</code></li> <li>Frontend WS_URL now uses <code>backend_port</code> cookiecutter variable instead of hardcoded 8000</li> </ul>"},{"location":"CHANGELOG/#changed_3","title":"Changed","text":""},{"location":"CHANGELOG/#post-generation-hook-improvements","title":"Post-Generation Hook Improvements","text":"<ul> <li>Stub file cleanup - removes files containing only docstrings with no actual code</li> <li>Auth file cleanup - removes auth/user files when JWT is disabled:</li> <li><code>auth.py</code>, <code>users.py</code> routes</li> <li><code>user.py</code> model, repository, service, schema</li> <li><code>token.py</code> schema</li> <li>Logfire cleanup - removes <code>logfire_setup.py</code> when Logfire is disabled</li> <li>Security cleanup - removes <code>security.py</code> when no auth is configured at all</li> <li>LangGraph/CrewAI cleanup - properly removes unused AI framework files</li> </ul>"},{"location":"CHANGELOG/#fixed_4","title":"Fixed","text":""},{"location":"CHANGELOG/#template-fixes","title":"Template Fixes","text":"<ul> <li>LangChain assistant <code>stream()</code> method - changed from sync generator to async generator using <code>astream()</code> for proper async streaming</li> <li>OAuth callback - made fully async, removed sync <code>asyncio.new_event_loop()</code> hack</li> <li>Deprecated <code>datetime.utcnow()</code> - replaced with <code>datetime.now(UTC)</code> across all services:</li> <li><code>cleanup.py</code> command</li> <li><code>session.py</code> repository and service</li> <li><code>conversation.py</code> service</li> <li><code>webhook.py</code> service</li> <li>Session model - added missing <code>default_factory=datetime.utcnow</code> for <code>created_at</code> and <code>last_used_at</code> fields</li> <li>Webhook model - moved <code>import json</code> to module level instead of inside properties</li> <li>Admin panel template condition - now correctly checks for SQLAlchemy ORM requirement</li> <li>Caching setup - only runs when both caching AND Redis are enabled</li> <li>Config imports - fixed conditional imports for Redis-only projects (no database)</li> </ul>"},{"location":"CHANGELOG/#tests-added_2","title":"Tests Added","text":"<ul> <li>290+ new test lines covering all new validation rules</li> <li>Tests for WebSocket auth requiring main auth</li> <li>Tests for admin panel requiring SQLAlchemy</li> <li>Tests for admin authentication requiring JWT</li> <li>Tests for conversation persistence requiring AI agent</li> <li>Tests for webhooks requiring database</li> <li>Tests for Logfire feature dependencies (database, Redis, Celery)</li> <li>Tests for background task queues requiring Redis</li> <li>Updated CLI tests to include <code>--redis</code> flag with task queue options</li> </ul>"},{"location":"CHANGELOG/#0112-2026-01-02","title":"[0.1.12] - 2026-01-02","text":""},{"location":"CHANGELOG/#added_3","title":"Added","text":""},{"location":"CHANGELOG/#crewai-multi-agent-framework-improvements","title":"CrewAI Multi-Agent Framework Improvements","text":"<ul> <li>Full type annotations for all CrewAI event handlers in <code>crewai_assistant.py</code></li> <li>Comprehensive event queue listener with handlers for:</li> <li><code>crew_started</code>, <code>crew_completed</code>, <code>crew_failed</code></li> <li><code>agent_started</code>, <code>agent_completed</code></li> <li><code>task_started</code>, <code>task_completed</code></li> <li><code>tool_started</code>, <code>tool_finished</code></li> <li><code>llm_started</code>, <code>llm_completed</code></li> <li>Improved stream method with proper thread and queue handling:</li> <li>Natural completion path when receiving None sentinel</li> <li>Race condition handling for thread death scenarios</li> <li>Defensive code with <code># pragma: no cover</code> for edge cases</li> <li>100% test coverage for CrewAI assistant module</li> </ul>"},{"location":"CHANGELOG/#fixed_5","title":"Fixed","text":""},{"location":"CHANGELOG/#backend-fixes","title":"Backend Fixes","text":"<ul> <li>Type annotations - All mypy errors fixed across the codebase:</li> <li>Added <code>Any</code> types where needed in <code>logfire_setup.py</code></li> <li>Fixed <code>Callable</code> types in <code>commands/__init__.py</code></li> <li>Added proper types to versioning middleware</li> <li>Full type coverage for CrewAI event handlers</li> <li>WebSocket disconnect handling - Proper logging and cleanup when client disconnects during agent processing (lines 241-242 in <code>agent.py</code>)</li> <li>Health endpoint edge cases - Added <code># pragma: no cover</code> for unreachable 503 response path (checks dict is always empty)</li> <li>Abstract method coverage - Added <code># pragma: no cover</code> for abstract <code>run()</code> method in <code>BasePipeline</code></li> </ul>"},{"location":"CHANGELOG/#frontend-fixes","title":"Frontend Fixes","text":"<ul> <li>Timeline connector lines for grouped messages now display correctly</li> <li>Message grouping visual indicators properly connect related messages</li> </ul>"},{"location":"CHANGELOG/#tests-added_3","title":"Tests Added","text":"<ul> <li>100% code coverage achieved (720 statements, 0 missing)</li> <li>Tests for all 11 CrewAI event handlers:</li> <li><code>test_crew_started_handler</code>, <code>test_crew_completed_handler</code>, <code>test_crew_failed_handler</code></li> <li><code>test_agent_started_handler</code>, <code>test_agent_completed_handler</code></li> <li><code>test_task_started_handler</code>, <code>test_task_completed_handler</code></li> <li><code>test_tool_started_handler</code>, <code>test_tool_finished_handler</code></li> <li><code>test_llm_started_handler</code>, <code>test_llm_completed_handler</code></li> <li>Tests for CrewAI stream method edge cases:</li> <li><code>test_stream_complete_flow</code> - natural completion path</li> <li><code>test_stream_empty_queue_break</code> - queue empty handling</li> <li><code>test_stream_with_error</code> - error event handling</li> <li>Tests for WebSocket disconnect during processing:</li> <li><code>test_websocket_disconnect_during_stream</code></li> <li><code>test_websocket_disconnect_during_processing</code></li> <li>Tests for health endpoint edge cases:</li> <li><code>test_readiness_probe_503_unit</code> - 503 response logic</li> </ul>"},{"location":"CHANGELOG/#0111-2026-01-02","title":"[0.1.11] - 2026-01-02","text":""},{"location":"CHANGELOG/#added_4","title":"Added","text":""},{"location":"CHANGELOG/#langgraph-react-agent-support","title":"LangGraph ReAct Agent Support","text":"<ul> <li>LangGraph as third AI framework option alongside PydanticAI and LangChain</li> <li>New <code>--ai-framework langgraph</code> CLI option for project creation</li> <li>Interactive prompt includes \"LangGraph (ReAct agent)\" choice</li> <li>ReAct (Reasoning + Acting) agent pattern with graph-based architecture:</li> <li>Agent node for LLM reasoning and tool decision</li> <li>Tools node for executing tool calls</li> <li>Conditional edges for tool execution loop</li> <li>Memory-based checkpointing for conversation continuity</li> <li>Full WebSocket streaming support using <code>astream()</code> with dual modes:</li> <li><code>messages</code> mode for token-level LLM streaming</li> <li><code>updates</code> mode for node state changes (tool calls/results)</li> <li>Tool result correlation - proper <code>tool_call_id</code> matching between calls and results</li> <li>New template files:</li> <li><code>app/agents/langgraph_assistant.py</code> - LangGraphAssistant class with run() and stream()</li> <li>WebSocket route implementation in <code>app/api/routes/v1/agent.py</code></li> <li>New cookiecutter variable: <code>use_langgraph</code></li> <li>Dependencies for LangGraph projects:</li> <li><code>langchain-core&gt;=0.3.0</code></li> <li><code>langchain-openai&gt;=0.3.0</code> or <code>langchain-anthropic&gt;=0.3.0</code></li> <li><code>langgraph&gt;=0.2.0</code></li> <li><code>langgraph-checkpoint&gt;=2.0.0</code></li> </ul>"},{"location":"CHANGELOG/#changed_4","title":"Changed","text":"<ul> <li><code>AIFrameworkType</code> enum extended with <code>LANGGRAPH</code> value</li> <li>AI framework prompt now shows three options: PydanticAI, LangChain, LangGraph</li> <li>LLM provider validation - OpenRouter not supported with LangGraph (same as LangChain)</li> <li><code>VARIABLES.md</code> updated with <code>use_langgraph</code> documentation</li> <li>Template <code>CLAUDE.md</code> includes LangGraph in stack section</li> </ul>"},{"location":"CHANGELOG/#0110-2025-12-27","title":"[0.1.10] - 2025-12-27","text":""},{"location":"CHANGELOG/#added_5","title":"Added","text":""},{"location":"CHANGELOG/#nginx-reverse-proxy-support","title":"Nginx Reverse Proxy Support","text":"<ul> <li>Nginx as alternative to Traefik with two configuration modes:</li> <li><code>nginx_included</code>: Full Nginx setup in docker-compose.prod.yml</li> <li><code>nginx_external</code>: Nginx config template only, for external Nginx</li> <li>Nginx configuration template (<code>nginx/nginx.conf</code>) with:</li> <li>Reverse proxy for backend API (api.DOMAIN)</li> <li>Reverse proxy for frontend (DOMAIN) - conditional</li> <li>Reverse proxy for Flower dashboard (flower.DOMAIN) - conditional</li> <li>WebSocket support for <code>/ws</code> endpoint</li> <li>Security headers (X-Frame-Options, X-Content-Type-Options, HSTS, etc.)</li> <li>HTTP to HTTPS redirect</li> <li>SSL/TLS configuration with modern cipher suites</li> <li>Let's Encrypt ACME challenge support</li> <li>SSL certificate directory (<code>nginx/ssl/</code>) with setup instructions</li> <li>New cookiecutter variables:</li> <li><code>include_nginx_service</code>: Include Nginx container in docker-compose</li> <li><code>include_nginx_config</code>: Generate nginx configuration files</li> <li><code>use_nginx</code>: Using Nginx (included or external)</li> <li><code>use_traefik</code>: Using Traefik (included or external)</li> </ul>"},{"location":"CHANGELOG/#changed_5","title":"Changed","text":"<ul> <li>Reverse proxy prompt now offers 5 options:</li> <li>Traefik (included in docker-compose) - default</li> <li>Traefik (external, shared between projects)</li> <li>Nginx (included in docker-compose)</li> <li>Nginx (external, config template only)</li> <li>None (expose ports directly)</li> <li><code>ReverseProxyType</code> enum extended with <code>NGINX_INCLUDED</code> and <code>NGINX_EXTERNAL</code></li> <li>docker-compose.prod.yml updated:</li> <li>Added nginx service definition</li> <li>Services use backend-internal network when nginx is selected</li> <li>No ports exposed on backend/frontend when nginx handles traffic</li> <li><code>.env.prod.example</code> includes DOMAIN variable for nginx configuration</li> <li><code>post_gen_project.py</code> removes nginx/ folder when nginx is not selected</li> </ul>"},{"location":"CHANGELOG/#tests-added_4","title":"Tests Added","text":"<ul> <li>Tests for <code>NGINX_INCLUDED</code> and <code>NGINX_EXTERNAL</code> enum values</li> <li>Tests for cookiecutter context generation with all reverse proxy options</li> <li>Tests for <code>prompt_reverse_proxy()</code> with nginx choices</li> </ul>"},{"location":"CHANGELOG/#019-2025-12-26","title":"[0.1.9] - 2025-12-26","text":""},{"location":"CHANGELOG/#added_6","title":"Added","text":""},{"location":"CHANGELOG/#sqlmodel-support","title":"SQLModel Support","text":"<ul> <li>Optional SQLModel ORM as alternative to SQLAlchemy for PostgreSQL and SQLite</li> <li>New <code>--orm</code> CLI option: <code>--orm sqlalchemy</code> (default) or <code>--orm sqlmodel</code></li> <li>Interactive prompt for ORM library selection when using <code>fastapi-fullstack new</code></li> <li>SQLModel provides simplified syntax combining SQLAlchemy and Pydantic:   Python<pre><code>from sqlmodel import SQLModel, Field\n\nclass User(SQLModel, table=True):\n    id: uuid.UUID = Field(default_factory=uuid.uuid4, primary_key=True)\n    email: str = Field(max_length=255, unique=True)\n    is_active: bool = Field(default=True)\n</code></pre></li> <li>Full Alembic compatibility maintained with SQLModel</li> <li>SQLAdmin works seamlessly with SQLModel models</li> <li>All database models updated with SQLModel variants:</li> <li><code>User</code>, <code>Item</code>, <code>Conversation</code>, <code>Message</code>, <code>Session</code>, <code>Webhook</code>, <code>WebhookDelivery</code></li> <li><code>VARIABLES.md</code> updated with new ORM variables: <code>orm_type</code>, <code>use_sqlalchemy</code>, <code>use_sqlmodel</code></li> </ul>"},{"location":"CHANGELOG/#changed_6","title":"Changed","text":"<ul> <li>Database model templates now support conditional SQLModel/SQLAlchemy syntax</li> <li><code>alembic/env.py</code> uses <code>SQLModel.metadata</code> when SQLModel is selected</li> <li>Repositories remain unchanged (SQLModel uses same AsyncSession and methods)</li> </ul>"},{"location":"CHANGELOG/#tests-added_5","title":"Tests Added","text":"<ul> <li>Tests for <code>OrmType</code> enum values</li> <li>Tests for <code>use_sqlalchemy</code> and <code>use_sqlmodel</code> computed fields</li> <li>Tests for SQLModel validation (requires PostgreSQL or SQLite)</li> <li>Tests for <code>prompt_orm_type()</code> function</li> <li>Updated <code>run_interactive_prompts()</code> tests with <code>prompt_orm_type</code> mocks</li> </ul>"},{"location":"CHANGELOG/#017-2025-12-23","title":"[0.1.7] - 2025-12-23","text":""},{"location":"CHANGELOG/#added_7","title":"Added","text":""},{"location":"CHANGELOG/#docker-production","title":"Docker &amp; Production","text":"<ul> <li>Optional Traefik reverse proxy with three configuration modes:</li> <li><code>traefik_included</code>: Full Traefik setup in docker-compose.prod.yml (default)</li> <li><code>traefik_external</code>: Traefik labels only, for shared Traefik instances</li> <li><code>none</code>: No reverse proxy, ports exposed directly</li> <li><code>.env.prod.example</code> template for production secrets management:</li> <li>Conditional sections for PostgreSQL, Redis, JWT, Traefik, Flower</li> <li>Required variable validation using <code>${VAR:?error}</code> syntax</li> <li>Setup instructions in docker-compose.prod.yml header</li> <li>Unique Traefik router names using <code>project_slug</code> prefix for multi-tenant support:</li> <li><code>{project_slug}-api</code>, <code>{project_slug}-frontend</code>, <code>{project_slug}-flower</code></li> <li>Prevents conflicts when running multiple projects on same server</li> </ul>"},{"location":"CHANGELOG/#ai-agent-support","title":"AI Agent Support","text":"<ul> <li><code>AGENTS.md</code> file for non-Claude AI agents (Codex, Copilot, Cursor, Zed, OpenCode)</li> <li>Progressive disclosure documentation in generated projects:</li> <li><code>docs/architecture.md</code> - layered architecture details</li> <li><code>docs/adding_features.md</code> - how to add endpoints, commands, tools</li> <li><code>docs/testing.md</code> - testing guide and examples</li> <li><code>docs/patterns.md</code> - DI, service, repository patterns</li> <li>README.md updated with \"AI-Agent Friendly\" section</li> </ul>"},{"location":"CHANGELOG/#changed_7","title":"Changed","text":"<ul> <li>Template <code>CLAUDE.md</code> refactored from 384 to ~80 lines following progressive disclosure best practices</li> <li>Main project <code>CLAUDE.md</code> updated with \"Where to Find More Info\" section</li> <li>docker-compose.prod.yml now uses <code>env_file: .env.prod</code> instead of inline defaults</li> <li>Removed hardcoded credentials (<code>changeme</code>) from docker-compose.prod.yml</li> </ul>"},{"location":"CHANGELOG/#security_1","title":"Security","text":"<ul> <li>Production credentials no longer have insecure defaults</li> <li><code>.env.prod</code> added to <code>.gitignore</code> to prevent committing secrets</li> <li>Required environment variables fail fast with descriptive error messages</li> </ul>"},{"location":"CHANGELOG/#016-2025-12-22","title":"[0.1.6] - 2025-12-22","text":""},{"location":"CHANGELOG/#added_8","title":"Added","text":""},{"location":"CHANGELOG/#multi-llm-provider-support","title":"Multi-LLM Provider Support","text":"<ul> <li>Multiple LLM providers for AI agents: OpenAI, Anthropic, and OpenRouter</li> <li>PydanticAI supports all three providers (OpenAI, Anthropic, OpenRouter)</li> <li>LangChain supports OpenAI and Anthropic</li> <li>New <code>--llm-provider</code> CLI option and interactive prompt</li> <li>Provider-specific API key configuration in <code>.env</code> and <code>config.py</code></li> </ul>"},{"location":"CHANGELOG/#cli-enhancements","title":"CLI Enhancements","text":"<ul> <li><code>make create-admin</code> command for quick admin user creation</li> <li>Comprehensive CLI options for <code>fastapi-fullstack create</code> command:</li> <li><code>--redis</code>, <code>--caching</code>, <code>--rate-limiting</code></li> <li><code>--admin-panel</code>, <code>--websockets</code></li> <li><code>--task-queue</code> (none/celery/taskiq/arq)</li> <li><code>--oauth-google</code>, <code>--session-management</code></li> <li><code>--kubernetes</code>, <code>--ci</code> (github/gitlab/none)</li> <li><code>--sentry</code>, <code>--prometheus</code></li> <li><code>--file-storage</code>, <code>--webhooks</code></li> <li><code>--python-version</code> (3.11/3.12/3.13)</li> <li><code>--i18n</code></li> <li>Configuration presets for common use cases:</li> <li><code>--preset production</code>: Full production setup with Redis, Sentry, K8s, Prometheus</li> <li><code>--preset ai-agent</code>: AI agent with WebSocket streaming and conversation persistence</li> <li>Interactive rate limit configuration when rate limiting is enabled:</li> <li>Requests per period (default: 100)</li> <li>Period in seconds (default: 60)</li> <li>Storage backend (memory or Redis)</li> </ul>"},{"location":"CHANGELOG/#documentation","title":"Documentation","text":"<ul> <li>Improved CLI documentation in README explaining project CLI naming convention (<code>uv run &lt;project_slug&gt;</code>)</li> <li>Makefile shortcuts documented with <code>make help</code> command</li> </ul>"},{"location":"CHANGELOG/#template-improvements_1","title":"Template Improvements","text":"<ul> <li>Generator version metadata in generated projects (<code>pyproject.toml</code>):   TOML<pre><code>[tool.fastapi-fullstack]\ngenerator_version = \"0.1.6\"\ngenerated_at = \"2025-12-22T10:30:00+00:00\"\n</code></pre></li> <li>Centralized agent prompts module (<code>app/agents/prompts.py</code>) for easier maintenance</li> <li>Template variables documentation (<code>template/VARIABLES.md</code>) with 88+ variables documented</li> </ul>"},{"location":"CHANGELOG/#validation","title":"Validation","text":"<ul> <li>Email validation for <code>author_email</code> field using Pydantic's <code>EmailStr</code></li> <li>Tests for OpenRouter + LangChain validation (combination is rejected)</li> <li>Tests for agents folder conditional creation</li> </ul>"},{"location":"CHANGELOG/#changed_8","title":"Changed","text":""},{"location":"CHANGELOG/#configuration-validation","title":"Configuration Validation","text":"<ul> <li>Improved option combination validation in <code>ProjectConfig</code>:</li> <li>Admin panel requires PostgreSQL or SQLite (not MongoDB)</li> <li>Caching requires Redis to be enabled</li> <li>Session management requires a database</li> <li>Conversation persistence requires a database</li> <li>Rate limiting with Redis storage requires Redis enabled</li> <li>OpenRouter is only available with PydanticAI (not LangChain)</li> </ul>"},{"location":"CHANGELOG/#database-support","title":"Database Support","text":"<ul> <li>Admin panel prompt now appears for both PostgreSQL and SQLite (previously only PostgreSQL)</li> <li>Database-specific post-generation messages:</li> <li>PostgreSQL: <code>make docker-db</code> + migration commands</li> <li>SQLite: Auto-creation note + migration commands (no Docker)</li> <li>MongoDB: <code>make docker-mongo</code> (no migrations)</li> <li>Added <code>close_db()</code> function for SQLite database consistency</li> </ul>"},{"location":"CHANGELOG/#project-name-handling","title":"Project Name Handling","text":"<ul> <li>Unified project name validation between <code>prompts.py</code> and <code>config.py</code></li> <li>Extracted validation into <code>_validate_project_name()</code> function with clear error messages</li> <li>Shows converted project name to user when it differs from input</li> </ul>"},{"location":"CHANGELOG/#fixed_6","title":"Fixed","text":""},{"location":"CHANGELOG/#backend-fixes_1","title":"Backend Fixes","text":"<ul> <li>Conversation list API response format: Changed <code>/conversations</code> and <code>/conversations/{id}/messages</code> endpoints to return paginated response <code>{ items: [...], total: N }</code> instead of raw array, fixing frontend conversation list not loading after page refresh</li> <li>Database session handling: Split <code>get_db_session</code> into async generator for FastAPI <code>Depends()</code> and <code>@asynccontextmanager</code> for manual use (WebSocket handlers)</li> <li>WebSocket authentication:</li> <li>Update <code>deps.py</code> to use <code>get_db_context</code> for WebSocket auth</li> <li>Add cookie-based authentication support for WebSocket (<code>access_token</code> cookie)</li> <li>Now accepts token via query parameter OR cookie for flexibility</li> <li>WebSocket exception handling: Fix <code>AttributeError</code> when exception occurs on WebSocket connection (<code>request.method</code> doesn't exist for WebSocket)</li> <li>WebSocket conversation persistence:</li> <li>Fix <code>get_db_session</code> vs <code>get_db_context</code> usage (async generator vs async context manager)</li> <li>Fix event name mismatch: backend now sends <code>conversation_created</code> to match frontend expectation</li> <li>Docker Compose: Fix <code>env_file</code> path from <code>.env</code> to <code>./backend/.env</code></li> <li>ValidationInfo typing: Add proper type hints to all field validators in <code>config.py</code></li> </ul>"},{"location":"CHANGELOG/#frontend-fixes_1","title":"Frontend Fixes","text":"<ul> <li>ThemeToggle hydration mismatch: Add mounted state to prevent SSR/client mismatch</li> <li>Button component: Extract <code>asChild</code> prop to prevent DOM warning</li> <li>ConversationList: Add default value for conversations to prevent undefined error</li> <li>New Chat button:</li> <li>Create conversation in database immediately (eager creation)</li> <li>Clear messages properly when switching conversations</li> <li>Fix message appending issue when switching between conversations</li> <li>Conversation store: Add defensive checks for undefined state</li> </ul>"},{"location":"CHANGELOG/#cli-fixes","title":"CLI Fixes","text":"<ul> <li>Consistent package name: Changed from <code>fastapi-gen</code> to <code>fastapi-fullstack</code> in version option</li> <li>Makefile: Always generated now (removed from optional dev tools)</li> </ul>"},{"location":"CHANGELOG/#templategenerator-fixes","title":"Template/Generator Fixes","text":"<ul> <li>Ruff dependency in hooks: Graceful handling when ruff is not installed:</li> <li>Check PATH for ruff binary</li> <li>Fall back to <code>uvx ruff</code> if uv is available</li> <li>Fall back to <code>python -m ruff</code> if available as module</li> <li>Show friendly warning if ruff is not available</li> <li>Dynamic generator version: Replaced hardcoded version with <code>DYNAMIC</code> placeholder</li> <li>Unused files cleanup: Improved post-generation hook to remove:</li> <li>AI agent files based on framework selection</li> <li>Example CRUD files when disabled</li> <li>Conversation, webhook, session files when features disabled</li> <li>Worker directory when no background tasks selected</li> <li>Empty directories automatically</li> <li><code>.env</code> file location: Move <code>.env.example</code> from root to <code>backend/</code></li> </ul>"},{"location":"CHANGELOG/#tests-added_6","title":"Tests Added","text":"<ul> <li>Tests for all configuration validation combinations</li> <li>Tests for project name validation edge cases</li> <li>Tests for <code>new</code> command <code>--output</code> option</li> <li>Tests for OpenRouter + LangChain validation</li> <li>Tests for admin panel prompt with SQLite</li> <li>Tests for agents folder conditional creation</li> <li>Tests for email validation (config and prompts)</li> <li>Tests for rate limit configuration prompts</li> </ul>"},{"location":"ai-agent/","title":"AI Agent Documentation","text":"<p>This document describes the AI agent integrations available in the template.</p>"},{"location":"ai-agent/#overview","title":"Overview","text":"<p>The template supports multiple AI frameworks for building intelligent agents:</p> Framework Description Best For PydanticAI Type-safe AI with Pydantic integration Simple agents, type safety LangChain Comprehensive AI tooling ecosystem Complex chains, many integrations LangGraph Graph-based ReAct agents Multi-step reasoning, tool loops CrewAI Multi-agent orchestration Agent teams, complex workflows <p>Select your framework during project creation: Bash<pre><code>fastapi-fullstack create my_project --ai-framework pydanticai  # default\nfastapi-fullstack create my_project --ai-framework langchain\nfastapi-fullstack create my_project --ai-framework langgraph\nfastapi-fullstack create my_project --ai-framework crewai\n</code></pre></p>"},{"location":"ai-agent/#pydanticai-agent","title":"PydanticAI Agent","text":"<p>The default agent is powered by PydanticAI, providing:</p> <ul> <li>Type-safe AI interactions</li> <li>Tool/function calling support</li> <li>WebSocket streaming responses</li> <li>Conversation history persistence</li> <li>Logfire observability integration</li> </ul>"},{"location":"ai-agent/#architecture","title":"Architecture","text":"Text Only<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                      WebSocket Client                        \u2502\n\u2502                (Frontend / External Client)                  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                              \u2502\n                              \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    WebSocket Endpoint                        \u2502\n\u2502                  /api/v1/agent/ws                           \u2502\n\u2502         Authentication, Message Routing, Streaming           \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                              \u2502\n                              \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    AssistantAgent                            \u2502\n\u2502              PydanticAI Agent Wrapper                        \u2502\n\u2502         Model Config, Tools, Streaming via iter()            \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                              \u2502\n                              \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                      LLM Provider                            \u2502\n\u2502                  OpenAI / Anthropic / etc.                   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"ai-agent/#configuration","title":"Configuration","text":""},{"location":"ai-agent/#environment-variables","title":"Environment Variables","text":"Bash<pre><code># Required\nOPENAI_API_KEY=sk-...\n\n# Optional\nAI_MODEL=gpt-4o-mini        # Default model\nAI_TEMPERATURE=0.7          # Response creativity (0.0-1.0)\n</code></pre>"},{"location":"ai-agent/#settings","title":"Settings","text":"Python<pre><code># app/core/config.py\nclass Settings(BaseSettings):\n    # AI Agent\n    OPENAI_API_KEY: str = \"\"\n    AI_MODEL: str = \"gpt-4o-mini\"\n    AI_TEMPERATURE: float = 0.7\n</code></pre>"},{"location":"ai-agent/#agent-implementation","title":"Agent Implementation","text":""},{"location":"ai-agent/#assistantagent-class","title":"AssistantAgent Class","text":"Python<pre><code># app/agents/assistant.py\nfrom dataclasses import dataclass, field\nfrom typing import Any\n\nfrom pydantic_ai import Agent, RunContext\nfrom pydantic_ai.models.openai import OpenAIChatModel\nfrom pydantic_ai.providers.openai import OpenAIProvider\nfrom pydantic_ai.settings import ModelSettings\n\nfrom app.core.config import settings\n\n\n@dataclass\nclass Deps:\n    \"\"\"Dependencies for the agent.\n\n    Passed to tools via RunContext.\n    \"\"\"\n    user_id: str | None = None\n    user_name: str | None = None\n    metadata: dict[str, Any] = field(default_factory=dict)\n\n\nclass AssistantAgent:\n    \"\"\"Wrapper for PydanticAI agent with tool support.\"\"\"\n\n    def __init__(\n        self,\n        model_name: str | None = None,\n        temperature: float | None = None,\n        system_prompt: str = \"You are a helpful assistant.\",\n    ):\n        self.model_name = model_name or settings.AI_MODEL\n        self.temperature = temperature or settings.AI_TEMPERATURE\n        self.system_prompt = system_prompt\n        self._agent: Agent[Deps, str] | None = None\n\n    def _create_agent(self) -&gt; Agent[Deps, str]:\n        \"\"\"Create and configure the PydanticAI agent.\"\"\"\n        model = OpenAIChatModel(\n            self.model_name,\n            provider=OpenAIProvider(api_key=settings.OPENAI_API_KEY),\n        )\n\n        agent = Agent[Deps, str](\n            model=model,\n            model_settings=ModelSettings(temperature=self.temperature),\n            system_prompt=self.system_prompt,\n        )\n\n        self._register_tools(agent)\n        return agent\n\n    def _register_tools(self, agent: Agent[Deps, str]) -&gt; None:\n        \"\"\"Register all tools on the agent.\"\"\"\n\n        @agent.tool\n        async def current_datetime(ctx: RunContext[Deps]) -&gt; str:\n            \"\"\"Get the current date and time.\"\"\"\n            from app.agents.tools import get_current_datetime\n            return get_current_datetime()\n\n    @property\n    def agent(self) -&gt; Agent[Deps, str]:\n        \"\"\"Get or create the agent instance.\"\"\"\n        if self._agent is None:\n            self._agent = self._create_agent()\n        return self._agent\n\n    async def run(\n        self,\n        user_input: str,\n        history: list[dict[str, str]] | None = None,\n        deps: Deps | None = None,\n    ) -&gt; tuple[str, list[Any], Deps]:\n        \"\"\"Run agent and return output with tool events.\"\"\"\n        # Convert history to PydanticAI format\n        model_history = self._convert_history(history or [])\n        agent_deps = deps or Deps()\n\n        result = await self.agent.run(\n            user_input,\n            deps=agent_deps,\n            message_history=model_history,\n        )\n\n        # Extract tool call events\n        tool_events = []\n        for message in result.all_messages():\n            if hasattr(message, \"parts\"):\n                for part in message.parts:\n                    if hasattr(part, \"tool_name\"):\n                        tool_events.append(part)\n\n        return result.output, tool_events, agent_deps\n\n    async def iter(\n        self,\n        user_input: str,\n        history: list[dict[str, str]] | None = None,\n        deps: Deps | None = None,\n    ):\n        \"\"\"Stream agent execution with full event access.\"\"\"\n        model_history = self._convert_history(history or [])\n        agent_deps = deps or Deps()\n\n        async with self.agent.iter(\n            user_input,\n            deps=agent_deps,\n            message_history=model_history,\n        ) as run:\n            async for event in run:\n                yield event\n</code></pre>"},{"location":"ai-agent/#adding-custom-tools","title":"Adding Custom Tools","text":""},{"location":"ai-agent/#creating-a-tool","title":"Creating a Tool","text":"Python<pre><code># app/agents/tools/weather.py\nimport httpx\n\n\nasync def get_weather(city: str) -&gt; dict:\n    \"\"\"Get current weather for a city.\n\n    Args:\n        city: City name (e.g., \"London\", \"New York\")\n\n    Returns:\n        Weather data including temperature and conditions.\n    \"\"\"\n    async with httpx.AsyncClient() as client:\n        response = await client.get(\n            \"https://api.weatherapi.com/v1/current.json\",\n            params={\"key\": \"YOUR_API_KEY\", \"q\": city},\n        )\n        data = response.json()\n\n    return {\n        \"city\": city,\n        \"temperature\": data[\"current\"][\"temp_c\"],\n        \"condition\": data[\"current\"][\"condition\"][\"text\"],\n        \"humidity\": data[\"current\"][\"humidity\"],\n    }\n</code></pre>"},{"location":"ai-agent/#registering-the-tool","title":"Registering the Tool","text":"Python<pre><code># app/agents/assistant.py\n\ndef _register_tools(self, agent: Agent[Deps, str]) -&gt; None:\n    \"\"\"Register all tools on the agent.\"\"\"\n\n    @agent.tool\n    async def current_datetime(ctx: RunContext[Deps]) -&gt; str:\n        \"\"\"Get the current date and time.\"\"\"\n        from app.agents.tools import get_current_datetime\n        return get_current_datetime()\n\n    @agent.tool\n    async def get_weather(ctx: RunContext[Deps], city: str) -&gt; dict:\n        \"\"\"Get current weather for a city.\n\n        Args:\n            city: City name (e.g., \"London\", \"New York\")\n        \"\"\"\n        from app.agents.tools.weather import get_weather as fetch_weather\n        return await fetch_weather(city)\n\n    @agent.tool\n    async def search_database(ctx: RunContext[Deps], query: str) -&gt; list[dict]:\n        \"\"\"Search the database for items.\n\n        Args:\n            query: Search query string\n        \"\"\"\n        # Access dependencies via ctx.deps\n        user_id = ctx.deps.user_id\n        # Perform search...\n        return results\n</code></pre>"},{"location":"ai-agent/#tool-best-practices","title":"Tool Best Practices","text":"<ol> <li>Clear docstrings - The LLM uses these to understand when to call tools</li> <li>Type hints - Required for argument validation</li> <li>Async - Use async functions for I/O operations</li> <li>Error handling - Return user-friendly error messages</li> <li>Context access - Use <code>ctx.deps</code> for user-specific data</li> </ol>"},{"location":"ai-agent/#websocket-endpoint","title":"WebSocket Endpoint","text":""},{"location":"ai-agent/#basic-endpoint","title":"Basic Endpoint","text":"Python<pre><code># app/api/routes/v1/agent.py\nfrom fastapi import APIRouter, WebSocket, WebSocketDisconnect\nfrom pydantic_ai.messages import PartDeltaEvent\n\nfrom app.agents.assistant import AssistantAgent, Deps\n\nrouter = APIRouter(prefix=\"/agent\", tags=[\"agent\"])\n\n\n@router.websocket(\"/ws\")\nasync def agent_websocket(websocket: WebSocket):\n    \"\"\"WebSocket endpoint for AI agent streaming.\"\"\"\n    await websocket.accept()\n\n    agent = AssistantAgent()\n    history: list[dict[str, str]] = []\n\n    try:\n        while True:\n            # Receive message\n            data = await websocket.receive_json()\n            user_input = data.get(\"content\", \"\")\n            history = data.get(\"history\", history)\n\n            # Send start event\n            await websocket.send_json({\"type\": \"start\"})\n\n            # Stream response\n            full_response = \"\"\n            async for event in agent.iter(user_input, history):\n                if isinstance(event, PartDeltaEvent):\n                    if hasattr(event.delta, \"content\"):\n                        token = event.delta.content\n                        full_response += token\n                        await websocket.send_json({\n                            \"type\": \"token\",\n                            \"content\": token,\n                        })\n\n                # Handle tool calls\n                if hasattr(event, \"tool_name\"):\n                    await websocket.send_json({\n                        \"type\": \"tool_call\",\n                        \"tool\": {\n                            \"name\": event.tool_name,\n                            \"args\": event.args,\n                        },\n                    })\n\n            # Update history\n            history.append({\"role\": \"user\", \"content\": user_input})\n            history.append({\"role\": \"assistant\", \"content\": full_response})\n\n            # Send end event\n            await websocket.send_json({\"type\": \"end\"})\n\n    except WebSocketDisconnect:\n        pass\n</code></pre>"},{"location":"ai-agent/#with-authentication","title":"With Authentication","text":"Python<pre><code># app/api/routes/v1/agent.py\nfrom fastapi import WebSocket, WebSocketDisconnect, Query, HTTPException\n\nfrom app.core.security import verify_token\nfrom app.services.user import UserService\n\n\n@router.websocket(\"/ws\")\nasync def agent_websocket(\n    websocket: WebSocket,\n    token: str | None = Query(None),\n):\n    \"\"\"WebSocket endpoint with JWT authentication.\"\"\"\n    # Verify token\n    if not token:\n        await websocket.close(code=4001, reason=\"Missing token\")\n        return\n\n    payload = verify_token(token)\n    if payload is None:\n        await websocket.close(code=4001, reason=\"Invalid token\")\n        return\n\n    await websocket.accept()\n\n    # Create agent with user context\n    deps = Deps(\n        user_id=payload[\"sub\"],\n        user_name=payload.get(\"name\"),\n    )\n    agent = AssistantAgent()\n\n    # ... rest of the handler\n</code></pre>"},{"location":"ai-agent/#conversation-persistence","title":"Conversation Persistence","text":""},{"location":"ai-agent/#database-models","title":"Database Models","text":"Python<pre><code># app/db/models/conversation.py\nfrom uuid import uuid4\nfrom datetime import datetime\n\nfrom sqlalchemy import String, Text, DateTime, ForeignKey, JSON\nfrom sqlalchemy.dialects.postgresql import UUID\nfrom sqlalchemy.orm import Mapped, mapped_column, relationship\nfrom sqlalchemy.sql import func\n\nfrom app.db.base import Base\n\n\nclass Conversation(Base):\n    \"\"\"Conversation (chat session) model.\"\"\"\n\n    __tablename__ = \"conversations\"\n\n    id: Mapped[UUID] = mapped_column(UUID(as_uuid=True), primary_key=True, default=uuid4)\n    user_id: Mapped[UUID] = mapped_column(ForeignKey(\"users.id\"), nullable=False)\n    title: Mapped[str | None] = mapped_column(String(255), nullable=True)\n    created_at: Mapped[datetime] = mapped_column(DateTime(timezone=True), server_default=func.now())\n    updated_at: Mapped[datetime] = mapped_column(DateTime(timezone=True), onupdate=func.now())\n\n    messages: Mapped[list[\"Message\"]] = relationship(\"Message\", back_populates=\"conversation\")\n\n\nclass Message(Base):\n    \"\"\"Chat message model.\"\"\"\n\n    __tablename__ = \"messages\"\n\n    id: Mapped[UUID] = mapped_column(UUID(as_uuid=True), primary_key=True, default=uuid4)\n    conversation_id: Mapped[UUID] = mapped_column(ForeignKey(\"conversations.id\"), nullable=False)\n    role: Mapped[str] = mapped_column(String(20), nullable=False)  # user, assistant, tool\n    content: Mapped[str] = mapped_column(Text, nullable=False)\n    tool_calls: Mapped[dict | None] = mapped_column(JSON, nullable=True)\n    created_at: Mapped[datetime] = mapped_column(DateTime(timezone=True), server_default=func.now())\n\n    conversation: Mapped[\"Conversation\"] = relationship(\"Conversation\", back_populates=\"messages\")\n</code></pre>"},{"location":"ai-agent/#conversation-service","title":"Conversation Service","text":"Python<pre><code># app/services/conversation.py\nfrom uuid import UUID\n\nfrom sqlalchemy.ext.asyncio import AsyncSession\n\nfrom app.db.models.conversation import Conversation, Message\nfrom app.repositories.conversation import conversation_repo\n\n\nclass ConversationService:\n    \"\"\"Service for managing conversations.\"\"\"\n\n    def __init__(self, db: AsyncSession):\n        self.db = db\n\n    async def create(self, user_id: UUID, title: str | None = None) -&gt; Conversation:\n        \"\"\"Create a new conversation.\"\"\"\n        return await conversation_repo.create(self.db, user_id=user_id, title=title)\n\n    async def add_message(\n        self,\n        conversation_id: UUID,\n        role: str,\n        content: str,\n        tool_calls: dict | None = None,\n    ) -&gt; Message:\n        \"\"\"Add a message to a conversation.\"\"\"\n        return await conversation_repo.add_message(\n            self.db,\n            conversation_id=conversation_id,\n            role=role,\n            content=content,\n            tool_calls=tool_calls,\n        )\n\n    async def get_messages(self, conversation_id: UUID) -&gt; list[Message]:\n        \"\"\"Get all messages in a conversation.\"\"\"\n        return await conversation_repo.get_messages(self.db, conversation_id)\n</code></pre>"},{"location":"ai-agent/#persisting-messages","title":"Persisting Messages","text":"Python<pre><code># In WebSocket handler\nasync for event in agent.iter(user_input, history):\n    # ... stream tokens ...\n\n# Save to database\nawait conversation_service.add_message(\n    conversation_id=conversation_id,\n    role=\"user\",\n    content=user_input,\n)\nawait conversation_service.add_message(\n    conversation_id=conversation_id,\n    role=\"assistant\",\n    content=full_response,\n    tool_calls=tool_events if tool_events else None,\n)\n</code></pre>"},{"location":"ai-agent/#logfire-integration","title":"Logfire Integration","text":"<p>The agent is automatically instrumented with Logfire:</p> Python<pre><code># app/core/logfire_setup.py\nimport logfire\n\n\ndef instrument_pydantic_ai() -&gt; None:\n    \"\"\"Instrument PydanticAI for Logfire tracing.\"\"\"\n    logfire.instrument_pydantic_ai()\n</code></pre> <p>This provides:</p> <ul> <li>Traces for each agent run</li> <li>Token usage tracking</li> <li>Tool call visibility</li> <li>Latency metrics</li> <li>Error tracking</li> </ul> <p>View traces in the Logfire dashboard.</p>"},{"location":"ai-agent/#frontend-integration","title":"Frontend Integration","text":""},{"location":"ai-agent/#websocket-hook","title":"WebSocket Hook","text":"TypeScript<pre><code>// src/hooks/use-websocket.ts\nexport function useAgentWebSocket() {\n  const [isConnected, setIsConnected] = useState(false);\n  const [isStreaming, setIsStreaming] = useState(false);\n  const wsRef = useRef&lt;WebSocket | null&gt;(null);\n\n  const connect = useCallback((token?: string) =&gt; {\n    const url = token\n      ? `${WS_URL}?token=${token}`\n      : WS_URL;\n\n    const ws = new WebSocket(url);\n\n    ws.onopen = () =&gt; setIsConnected(true);\n    ws.onclose = () =&gt; setIsConnected(false);\n    ws.onmessage = (event) =&gt; {\n      const data = JSON.parse(event.data);\n      handleMessage(data);\n    };\n\n    wsRef.current = ws;\n  }, []);\n\n  const send = useCallback((content: string, history: Message[]) =&gt; {\n    wsRef.current?.send(JSON.stringify({\n      type: 'message',\n      content,\n      history: history.map(m =&gt; ({\n        role: m.role,\n        content: m.content,\n      })),\n    }));\n  }, []);\n\n  return { isConnected, isStreaming, connect, send };\n}\n</code></pre>"},{"location":"ai-agent/#message-types","title":"Message Types","text":"TypeScript<pre><code>// src/types/chat.ts\ninterface StreamEvent {\n  type: 'start' | 'token' | 'tool_call' | 'end' | 'error';\n  content?: string;\n  tool?: {\n    name: string;\n    args: Record&lt;string, unknown&gt;;\n  };\n  error?: string;\n}\n\ninterface Message {\n  id: string;\n  role: 'user' | 'assistant' | 'tool';\n  content: string;\n  tool_name?: string;\n  created_at: Date;\n}\n</code></pre>"},{"location":"ai-agent/#best-practices","title":"Best Practices","text":"<ol> <li>System prompts - Be specific about the agent's role and capabilities</li> <li>Tool design - Keep tools focused and well-documented</li> <li>Error handling - Return graceful error messages to users</li> <li>Rate limiting - Protect against abuse with request limits</li> <li>Context management - Limit history length to control token usage</li> <li>Observability - Use Logfire to monitor agent behavior</li> <li>Testing - Mock LLM responses for deterministic tests</li> </ol>"},{"location":"ai-agent/#troubleshooting","title":"Troubleshooting","text":""},{"location":"ai-agent/#common-issues","title":"Common Issues","text":"<p>\"Invalid API key\" - Check <code>OPENAI_API_KEY</code> is set correctly - Verify the key has sufficient credits</p> <p>\"Model not found\" - Check <code>AI_MODEL</code> is a valid model name - Ensure you have access to the specified model</p> <p>\"WebSocket connection failed\" - Verify the backend is running - Check CORS settings for WebSocket connections - Ensure the token is valid (if using auth)</p> <p>\"Tool not found\" - Verify the tool is registered in <code>_register_tools()</code> - Check the tool's docstring is descriptive enough</p>"},{"location":"ai-agent/#crewai-multi-agent-framework","title":"CrewAI Multi-Agent Framework","text":"<p>CrewAI enables multi-agent orchestration where specialized agents collaborate on complex tasks.</p>"},{"location":"ai-agent/#architecture_1","title":"Architecture","text":"Text Only<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                      WebSocket Client                        \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                              \u2502\n                              \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    WebSocket Endpoint                        \u2502\n\u2502                  /api/v1/agent/ws                           \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                              \u2502\n                              \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    CrewAIAssistant                           \u2502\n\u2502              Multi-Agent Crew Orchestrator                   \u2502\n\u2502         Agents, Tasks, Process (sequential/hierarchical)    \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                              \u2502\n              \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n              \u25bc               \u25bc               \u25bc\n        \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n        \u2502 Agent 1 \u2502     \u2502 Agent 2 \u2502     \u2502 Agent N \u2502\n        \u2502Researcher\u2502    \u2502 Writer  \u2502     \u2502   ...   \u2502\n        \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"ai-agent/#configuration_1","title":"Configuration","text":"Python<pre><code># app/agents/crewai_assistant.py\nfrom pydantic import BaseModel\n\nclass AgentConfig(BaseModel):\n    role: str           # Agent's role (e.g., \"Research Analyst\")\n    goal: str           # What the agent aims to achieve\n    backstory: str      # Agent's background/personality\n    tools: list[str] = []\n    allow_delegation: bool = True\n    verbose: bool = True\n\nclass TaskConfig(BaseModel):\n    description: str    # Task description\n    expected_output: str\n    agent_role: str     # Which agent handles this task\n    context_from: list[str] = []  # Dependencies on other tasks\n\nclass CrewConfig(BaseModel):\n    name: str = \"default_crew\"\n    process: str = \"sequential\"  # or \"hierarchical\"\n    memory: bool = True\n    max_rpm: int = 10\n    agents: list[AgentConfig] = []\n    tasks: list[TaskConfig] = []\n</code></pre>"},{"location":"ai-agent/#event-streaming","title":"Event Streaming","text":"<p>CrewAI streams real-time events via WebSocket:</p> Event Type Description <code>crew_started</code> Crew execution begins <code>crew_complete</code> Final result ready <code>agent_started</code> Agent begins working on task <code>agent_completed</code> Agent finishes task <code>task_started</code> Task execution begins <code>task_completed</code> Task result available <code>tool_started</code> Tool is being called <code>tool_finished</code> Tool returns result <code>llm_started</code> LLM request begins <code>llm_completed</code> LLM response received <code>error</code> Error occurred"},{"location":"ai-agent/#example-usage","title":"Example Usage","text":"Python<pre><code># Create a research crew\ncrew = CrewAIAssistant(config=CrewConfig(\n    name=\"research_crew\",\n    process=\"sequential\",\n    agents=[\n        AgentConfig(\n            role=\"Research Analyst\",\n            goal=\"Find accurate information\",\n            backstory=\"Expert researcher with attention to detail\",\n        ),\n        AgentConfig(\n            role=\"Content Writer\",\n            goal=\"Create clear, engaging content\",\n            backstory=\"Skilled writer who simplifies complex topics\",\n        ),\n    ],\n    tasks=[\n        TaskConfig(\n            description=\"Research the topic: {user_prompt}\",\n            expected_output=\"Comprehensive research summary\",\n            agent_role=\"Research Analyst\",\n        ),\n        TaskConfig(\n            description=\"Write an article based on the research\",\n            expected_output=\"Well-structured article\",\n            agent_role=\"Content Writer\",\n            context_from=[\"Research Analyst\"],\n        ),\n    ],\n))\n\n# Stream events\nasync for event in crew.stream(\"Explain quantum computing\"):\n    print(event)\n</code></pre>"},{"location":"ai-agent/#langgraph-react-agent","title":"LangGraph ReAct Agent","text":"<p>LangGraph provides graph-based agent orchestration with the ReAct pattern.</p>"},{"location":"ai-agent/#architecture_2","title":"Architecture","text":"Text Only<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                      WebSocket Client                        \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                              \u2502\n                              \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    WebSocket Endpoint                        \u2502\n\u2502                  /api/v1/agent/ws                           \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                              \u2502\n                              \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                   LangGraphAssistant                         \u2502\n\u2502               Graph-based ReAct Agent                        \u2502\n\u2502         Agent Node \u2190\u2192 Tools Node (conditional loop)         \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"ai-agent/#react-pattern","title":"ReAct Pattern","text":"<p>The agent follows the Reasoning + Acting pattern:</p> <ol> <li>Reason - Analyze the input and decide on action</li> <li>Act - Execute tools if needed</li> <li>Observe - Process tool results</li> <li>Repeat - Continue until task is complete</li> </ol>"},{"location":"ai-agent/#configuration_2","title":"Configuration","text":"Python<pre><code># app/agents/langgraph_assistant.py\nfrom langgraph.graph import StateGraph, MessagesState\n\nclass LangGraphAssistant:\n    def __init__(self, model_name: str = \"gpt-4o-mini\"):\n        self.model = ChatOpenAI(model=model_name)\n        self.tools = [get_current_datetime]\n        self.graph = self._build_graph()\n\n    def _build_graph(self) -&gt; StateGraph:\n        graph = StateGraph(MessagesState)\n        graph.add_node(\"agent\", self._agent_node)\n        graph.add_node(\"tools\", self._tools_node)\n        graph.add_conditional_edges(\n            \"agent\",\n            self._should_continue,\n            {\"continue\": \"tools\", \"end\": END}\n        )\n        graph.add_edge(\"tools\", \"agent\")\n        graph.set_entry_point(\"agent\")\n        return graph.compile(checkpointer=MemorySaver())\n</code></pre>"},{"location":"ai-agent/#streaming-modes","title":"Streaming Modes","text":"<p>LangGraph supports two streaming modes:</p> Python<pre><code># Token streaming (for LLM output)\nasync for event in assistant.stream(prompt, mode=\"messages\"):\n    if event[\"type\"] == \"token\":\n        print(event[\"content\"], end=\"\")\n\n# State updates (for tool calls)\nasync for event in assistant.stream(prompt, mode=\"updates\"):\n    if event[\"type\"] == \"tool_call\":\n        print(f\"Calling: {event['tool_name']}\")\n</code></pre>"},{"location":"ai-agent/#framework-comparison","title":"Framework Comparison","text":"Feature PydanticAI LangChain LangGraph CrewAI Type Safety \u2705 Native \u26a0\ufe0f Manual \u26a0\ufe0f Manual \u26a0\ufe0f Manual Multi-Agent \u274c \u26a0\ufe0f Complex \u26a0\ufe0f Complex \u2705 Native Tool Calling \u2705 \u2705 \u2705 \u2705 Streaming \u2705 iter() \u2705 astream \u2705 astream \u2705 Events Memory \u2705 Built-in \u2705 Chains \u2705 Checkpointer \u2705 Built-in Complexity Low Medium Medium High Dependencies Few Many Medium Many"},{"location":"ai-agent/#when-to-use-each","title":"When to Use Each","text":"<ul> <li>PydanticAI: Simple assistants, chatbots, type-safe applications</li> <li>LangChain: Complex chains, many third-party integrations needed</li> <li>LangGraph: Multi-step reasoning, tool loops, state machines</li> <li>CrewAI: Agent teams, role-based collaboration, complex workflows</li> </ul>"},{"location":"architecture/","title":"Backend Architecture","text":"<p>This document describes the backend architecture patterns used in generated projects.</p>"},{"location":"architecture/#layered-architecture","title":"Layered Architecture","text":"<p>The backend follows a clean layered architecture with clear separation of concerns:</p> Text Only<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                      API Layer (Routes)                      \u2502\n\u2502  HTTP endpoints, request validation, response serialization \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                              \u2502\n                              \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                     Service Layer                            \u2502\n\u2502      Business logic, orchestration, error handling           \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                              \u2502\n                              \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                   Repository Layer                           \u2502\n\u2502          Data access, database queries, CRUD                 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                              \u2502\n                              \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                      Database                                \u2502\n\u2502            PostgreSQL / MongoDB / SQLite                     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"architecture/#directory-structure","title":"Directory Structure","text":"Text Only<pre><code>app/\n\u251c\u2500\u2500 api/                    # API Layer\n\u2502   \u251c\u2500\u2500 routes/\n\u2502   \u2502   \u2514\u2500\u2500 v1/\n\u2502   \u2502       \u251c\u2500\u2500 __init__.py\n\u2502   \u2502       \u251c\u2500\u2500 health.py\n\u2502   \u2502       \u251c\u2500\u2500 auth.py\n\u2502   \u2502       \u251c\u2500\u2500 users.py\n\u2502   \u2502       \u2514\u2500\u2500 items.py\n\u2502   \u251c\u2500\u2500 deps.py             # Dependency injection\n\u2502   \u251c\u2500\u2500 router.py           # Route aggregation\n\u2502   \u2514\u2500\u2500 exception_handlers.py\n\u2502\n\u251c\u2500\u2500 services/               # Service Layer\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 user.py\n\u2502   \u2514\u2500\u2500 item.py\n\u2502\n\u251c\u2500\u2500 repositories/           # Repository Layer\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 base.py             # Generic CRUD operations\n\u2502   \u251c\u2500\u2500 user.py\n\u2502   \u2514\u2500\u2500 item.py\n\u2502\n\u251c\u2500\u2500 schemas/                # Pydantic Models\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 base.py\n\u2502   \u251c\u2500\u2500 user.py\n\u2502   \u2514\u2500\u2500 item.py\n\u2502\n\u251c\u2500\u2500 db/                     # Database\n\u2502   \u251c\u2500\u2500 models/\n\u2502   \u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2502   \u251c\u2500\u2500 user.py\n\u2502   \u2502   \u2514\u2500\u2500 item.py\n\u2502   \u251c\u2500\u2500 base.py\n\u2502   \u2514\u2500\u2500 session.py\n\u2502\n\u2514\u2500\u2500 core/                   # Core Configuration\n    \u251c\u2500\u2500 config.py\n    \u251c\u2500\u2500 security.py\n    \u2514\u2500\u2500 exceptions.py\n</code></pre>"},{"location":"architecture/#layer-responsibilities","title":"Layer Responsibilities","text":""},{"location":"architecture/#api-layer-appapiroutes","title":"API Layer (<code>app/api/routes/</code>)","text":"<p>The API layer handles HTTP concerns:</p> <ul> <li>Request validation - Pydantic schemas validate incoming data</li> <li>Authentication - Dependencies verify JWT/API keys</li> <li>Response serialization - Format data for clients</li> <li>Error responses - HTTP status codes and error messages</li> </ul> Python<pre><code># app/api/routes/v1/items.py\nfrom fastapi import APIRouter, Depends\nfrom sqlalchemy.ext.asyncio import AsyncSession\n\nfrom app.api.deps import get_db, get_current_user\nfrom app.schemas.item import ItemCreate, ItemResponse\nfrom app.services.item import ItemService\n\nrouter = APIRouter(prefix=\"/items\", tags=[\"items\"])\n\n\n@router.post(\"/\", response_model=ItemResponse)\nasync def create_item(\n    item_in: ItemCreate,\n    db: AsyncSession = Depends(get_db),\n    current_user: User = Depends(get_current_user),\n):\n    \"\"\"Create a new item.\"\"\"\n    service = ItemService(db)\n    item = await service.create(item_in)\n    return item\n</code></pre> <p>Key principles: - Routes are thin - delegate business logic to services - Use dependency injection for database sessions and auth - Keep request/response schemas separate from internal models</p>"},{"location":"architecture/#service-layer-appservices","title":"Service Layer (<code>app/services/</code>)","text":"<p>Services contain business logic and orchestration:</p> <ul> <li>Business rules - Validation beyond schema constraints</li> <li>Error handling - Domain-specific exceptions</li> <li>Orchestration - Coordinate multiple repositories</li> <li>External services - API calls, email, etc.</li> </ul> Python<pre><code># app/services/item.py\nfrom uuid import UUID\n\nfrom sqlalchemy.ext.asyncio import AsyncSession\n\nfrom app.core.exceptions import NotFoundError\nfrom app.db.models.item import Item\nfrom app.repositories import item_repo\nfrom app.schemas.item import ItemCreate, ItemUpdate\n\n\nclass ItemService:\n    \"\"\"Service for item-related business logic.\"\"\"\n\n    def __init__(self, db: AsyncSession):\n        self.db = db\n\n    async def get_by_id(self, item_id: UUID) -&gt; Item:\n        \"\"\"Get item by ID.\"\"\"\n        item = await item_repo.get_by_id(self.db, item_id)\n        if not item:\n            raise NotFoundError(\n                message=\"Item not found\",\n                details={\"item_id\": str(item_id)},\n            )\n        return item\n\n    async def create(self, item_in: ItemCreate) -&gt; Item:\n        \"\"\"Create a new item.\"\"\"\n        # Business validation could go here\n        return await item_repo.create(\n            self.db,\n            title=item_in.title,\n            description=item_in.description,\n        )\n\n    async def update(self, item_id: UUID, item_in: ItemUpdate) -&gt; Item:\n        \"\"\"Update an item.\"\"\"\n        item = await self.get_by_id(item_id)\n        update_data = item_in.model_dump(exclude_unset=True)\n        return await item_repo.update(self.db, db_item=item, update_data=update_data)\n</code></pre> <p>Key principles: - Services are stateless (except for db session) - Raise domain exceptions, not HTTP exceptions - Services can call other services for complex operations</p>"},{"location":"architecture/#repository-layer-apprepositories","title":"Repository Layer (<code>app/repositories/</code>)","text":"<p>Repositories handle data access:</p> <ul> <li>CRUD operations - Create, Read, Update, Delete</li> <li>Query building - Complex database queries</li> <li>Data mapping - ORM model interactions</li> </ul> Python<pre><code># app/repositories/item.py\nfrom uuid import UUID\n\nfrom sqlalchemy import select\nfrom sqlalchemy.ext.asyncio import AsyncSession\n\nfrom app.db.models.item import Item\n\n\nclass ItemRepository:\n    \"\"\"Repository for Item database operations.\"\"\"\n\n    async def get_by_id(self, db: AsyncSession, item_id: UUID) -&gt; Item | None:\n        \"\"\"Get item by ID.\"\"\"\n        return await db.get(Item, item_id)\n\n    async def get_multi(\n        self,\n        db: AsyncSession,\n        *,\n        skip: int = 0,\n        limit: int = 100,\n        active_only: bool = False,\n    ) -&gt; list[Item]:\n        \"\"\"Get multiple items with pagination.\"\"\"\n        query = select(Item)\n        if active_only:\n            query = query.where(Item.is_active == True)\n        query = query.offset(skip).limit(limit)\n        result = await db.execute(query)\n        return list(result.scalars().all())\n\n    async def create(\n        self,\n        db: AsyncSession,\n        *,\n        title: str,\n        description: str | None = None,\n    ) -&gt; Item:\n        \"\"\"Create a new item.\"\"\"\n        item = Item(title=title, description=description)\n        db.add(item)\n        await db.flush()\n        await db.refresh(item)\n        return item\n\n\n# Singleton instance\nitem_repo = ItemRepository()\n</code></pre> <p>Key principles: - Repositories are model-specific - Use <code>db.flush()</code> instead of <code>db.commit()</code> - let the caller manage transactions - Return ORM models, not dicts</p>"},{"location":"architecture/#base-repository","title":"Base Repository","text":"<p>The template provides a generic base repository for common CRUD operations:</p> Python<pre><code># app/repositories/base.py\nfrom typing import Any, Generic, TypeVar\n\nfrom pydantic import BaseModel\nfrom sqlalchemy import select\nfrom sqlalchemy.ext.asyncio import AsyncSession\n\nfrom app.db.base import Base\n\nModelType = TypeVar(\"ModelType\", bound=Base)\nCreateSchemaType = TypeVar(\"CreateSchemaType\", bound=BaseModel)\nUpdateSchemaType = TypeVar(\"UpdateSchemaType\", bound=BaseModel)\n\n\nclass BaseRepository(Generic[ModelType, CreateSchemaType, UpdateSchemaType]):\n    \"\"\"Base class for repository operations.\"\"\"\n\n    def __init__(self, model: type[ModelType]):\n        self.model = model\n\n    async def get(self, db: AsyncSession, id: Any) -&gt; ModelType | None:\n        \"\"\"Get a single record by ID.\"\"\"\n        return await db.get(self.model, id)\n\n    async def get_multi(\n        self,\n        db: AsyncSession,\n        *,\n        skip: int = 0,\n        limit: int = 100,\n    ) -&gt; list[ModelType]:\n        \"\"\"Get multiple records with pagination.\"\"\"\n        result = await db.execute(\n            select(self.model).offset(skip).limit(limit)\n        )\n        return list(result.scalars().all())\n\n    async def create(\n        self,\n        db: AsyncSession,\n        *,\n        obj_in: CreateSchemaType,\n    ) -&gt; ModelType:\n        \"\"\"Create a new record.\"\"\"\n        obj_in_data = obj_in.model_dump()\n        db_obj = self.model(**obj_in_data)\n        db.add(db_obj)\n        await db.flush()\n        await db.refresh(db_obj)\n        return db_obj\n</code></pre>"},{"location":"architecture/#schemas-pydantic-models","title":"Schemas (Pydantic Models)","text":"<p>Schemas define request/response structures:</p> Python<pre><code># app/schemas/item.py\nfrom uuid import UUID\nfrom datetime import datetime\n\nfrom pydantic import BaseModel, Field\n\n\nclass ItemBase(BaseModel):\n    \"\"\"Shared properties.\"\"\"\n    title: str = Field(..., min_length=1, max_length=100)\n    description: str | None = None\n\n\nclass ItemCreate(ItemBase):\n    \"\"\"Properties to receive on creation.\"\"\"\n    pass\n\n\nclass ItemUpdate(BaseModel):\n    \"\"\"Properties to receive on update.\"\"\"\n    title: str | None = Field(None, min_length=1, max_length=100)\n    description: str | None = None\n\n\nclass ItemResponse(ItemBase):\n    \"\"\"Properties to return to client.\"\"\"\n    id: UUID\n    is_active: bool\n    created_at: datetime\n    updated_at: datetime\n\n    model_config = {\"from_attributes\": True}\n</code></pre> <p>Key principles: - Separate schemas for Create, Update, and Response - Use <code>from_attributes = True</code> for ORM model conversion - Apply validation constraints (min_length, max_length, etc.)</p>"},{"location":"architecture/#database-models","title":"Database Models","text":"<p>SQLAlchemy models define the database schema:</p> Python<pre><code># app/db/models/item.py\nfrom uuid import uuid4\nfrom datetime import datetime\n\nfrom sqlalchemy import String, Text, Boolean, DateTime\nfrom sqlalchemy.dialects.postgresql import UUID\nfrom sqlalchemy.orm import Mapped, mapped_column\nfrom sqlalchemy.sql import func\n\nfrom app.db.base import Base\n\n\nclass Item(Base):\n    \"\"\"Item model.\"\"\"\n\n    __tablename__ = \"items\"\n\n    id: Mapped[UUID] = mapped_column(\n        UUID(as_uuid=True),\n        primary_key=True,\n        default=uuid4,\n    )\n    title: Mapped[str] = mapped_column(String(100), nullable=False)\n    description: Mapped[str | None] = mapped_column(Text, nullable=True)\n    is_active: Mapped[bool] = mapped_column(Boolean, default=True)\n    created_at: Mapped[datetime] = mapped_column(\n        DateTime(timezone=True),\n        server_default=func.now(),\n    )\n    updated_at: Mapped[datetime] = mapped_column(\n        DateTime(timezone=True),\n        server_default=func.now(),\n        onupdate=func.now(),\n    )\n</code></pre>"},{"location":"architecture/#dependency-injection","title":"Dependency Injection","text":"<p>FastAPI dependencies provide database sessions and authentication:</p> Python<pre><code># app/api/deps.py\nfrom collections.abc import AsyncGenerator\nfrom typing import Annotated\n\nfrom fastapi import Depends, HTTPException, status\nfrom fastapi.security import OAuth2PasswordBearer\nfrom sqlalchemy.ext.asyncio import AsyncSession\n\nfrom app.core.security import verify_token\nfrom app.db.session import async_session_maker\nfrom app.services.user import UserService\n\noauth2_scheme = OAuth2PasswordBearer(tokenUrl=\"/api/v1/auth/login\")\n\n\nasync def get_db() -&gt; AsyncGenerator[AsyncSession, None]:\n    \"\"\"Get database session.\"\"\"\n    async with async_session_maker() as session:\n        try:\n            yield session\n            await session.commit()\n        except Exception:\n            await session.rollback()\n            raise\n\n\nasync def get_current_user(\n    token: Annotated[str, Depends(oauth2_scheme)],\n    db: Annotated[AsyncSession, Depends(get_db)],\n):\n    \"\"\"Get current authenticated user.\"\"\"\n    payload = verify_token(token)\n    if payload is None:\n        raise HTTPException(\n            status_code=status.HTTP_401_UNAUTHORIZED,\n            detail=\"Invalid authentication credentials\",\n        )\n\n    user_service = UserService(db)\n    user = await user_service.get_by_id(payload[\"sub\"])\n    if user is None:\n        raise HTTPException(\n            status_code=status.HTTP_401_UNAUTHORIZED,\n            detail=\"User not found\",\n        )\n    return user\n\n\n# Type aliases for cleaner route signatures\nDB = Annotated[AsyncSession, Depends(get_db)]\nCurrentUser = Annotated[\"User\", Depends(get_current_user)]\n</code></pre> <p>Usage in routes:</p> Python<pre><code>@router.get(\"/me\")\nasync def get_me(current_user: CurrentUser):\n    return current_user\n\n\n@router.get(\"/items\")\nasync def list_items(db: DB):\n    service = ItemService(db)\n    return await service.get_multi()\n</code></pre>"},{"location":"architecture/#exception-handling","title":"Exception Handling","text":"<p>Custom exceptions provide consistent error responses:</p> Python<pre><code># app/core/exceptions.py\nfrom typing import Any\n\n\nclass AppError(Exception):\n    \"\"\"Base application error.\"\"\"\n\n    def __init__(\n        self,\n        message: str,\n        status_code: int = 500,\n        details: dict[str, Any] | None = None,\n    ):\n        self.message = message\n        self.status_code = status_code\n        self.details = details or {}\n        super().__init__(self.message)\n\n\nclass NotFoundError(AppError):\n    \"\"\"Resource not found.\"\"\"\n\n    def __init__(self, message: str = \"Not found\", details: dict | None = None):\n        super().__init__(message, status_code=404, details=details)\n\n\nclass AlreadyExistsError(AppError):\n    \"\"\"Resource already exists.\"\"\"\n\n    def __init__(self, message: str = \"Already exists\", details: dict | None = None):\n        super().__init__(message, status_code=409, details=details)\n\n\nclass ValidationError(AppError):\n    \"\"\"Validation failed.\"\"\"\n\n    def __init__(self, message: str = \"Validation error\", details: dict | None = None):\n        super().__init__(message, status_code=422, details=details)\n\n\nclass UnauthorizedError(AppError):\n    \"\"\"Authentication required.\"\"\"\n\n    def __init__(self, message: str = \"Unauthorized\", details: dict | None = None):\n        super().__init__(message, status_code=401, details=details)\n\n\nclass ForbiddenError(AppError):\n    \"\"\"Permission denied.\"\"\"\n\n    def __init__(self, message: str = \"Forbidden\", details: dict | None = None):\n        super().__init__(message, status_code=403, details=details)\n</code></pre> <p>Exception handlers convert these to HTTP responses:</p> Python<pre><code># app/api/exception_handlers.py\nfrom fastapi import FastAPI, Request\nfrom fastapi.responses import JSONResponse\n\nfrom app.core.exceptions import AppError\n\n\ndef register_exception_handlers(app: FastAPI) -&gt; None:\n    \"\"\"Register custom exception handlers.\"\"\"\n\n    @app.exception_handler(AppError)\n    async def app_error_handler(request: Request, exc: AppError):\n        return JSONResponse(\n            status_code=exc.status_code,\n            content={\n                \"error\": exc.message,\n                \"details\": exc.details,\n            },\n        )\n</code></pre>"},{"location":"architecture/#testing","title":"Testing","text":"<p>The layered architecture makes testing straightforward:</p> Python<pre><code># tests/test_services.py\nimport pytest\nfrom unittest.mock import AsyncMock, patch\n\nfrom app.services.item import ItemService\nfrom app.schemas.item import ItemCreate\n\n\n@pytest.mark.asyncio\nasync def test_create_item():\n    \"\"\"Test item creation.\"\"\"\n    mock_db = AsyncMock()\n\n    with patch(\"app.services.item.item_repo\") as mock_repo:\n        mock_repo.create.return_value = Item(\n            id=\"123\",\n            title=\"Test\",\n            description=\"Test item\",\n        )\n\n        service = ItemService(mock_db)\n        item = await service.create(ItemCreate(title=\"Test\", description=\"Test item\"))\n\n        assert item.title == \"Test\"\n        mock_repo.create.assert_called_once()\n</code></pre>"},{"location":"architecture/#best-practices","title":"Best Practices","text":"<ol> <li>Keep routes thin - Delegate to services</li> <li>Services handle business logic - Validation, orchestration</li> <li>Repositories handle data - Queries, CRUD</li> <li>Use dependency injection - For testability</li> <li>Raise domain exceptions - Not HTTP exceptions in services</li> <li>Use transactions appropriately - <code>flush()</code> in repos, <code>commit()</code> in deps</li> <li>Separate schemas - Create, Update, Response</li> <li>Type everything - Pydantic + Python type hints</li> </ol>"},{"location":"deployment/","title":"Deployment Guide","text":"<p>This guide covers deploying your generated FastAPI project to production.</p>"},{"location":"deployment/#overview","title":"Overview","text":"<p>The generated project supports multiple deployment options:</p> <ul> <li>Docker Compose - Simple single-server deployment</li> <li>Kubernetes - Production-grade orchestration</li> <li>Cloud Platforms - AWS, GCP, Azure, etc.</li> </ul>"},{"location":"deployment/#prerequisites","title":"Prerequisites","text":"<p>Before deploying, ensure you have:</p> <ol> <li>Docker installed on your deployment server</li> <li>Domain name configured (optional but recommended)</li> <li>SSL certificate (Let's Encrypt recommended)</li> <li>Environment variables prepared for production</li> </ol>"},{"location":"deployment/#environment-variables","title":"Environment Variables","text":""},{"location":"deployment/#required-for-production","title":"Required for Production","text":"Bash<pre><code># Core\nENVIRONMENT=production\nDEBUG=false\n\n# Security - MUST be changed!\nSECRET_KEY=your-secure-secret-key-at-least-32-characters\nAPI_KEY=your-secure-api-key\n\n# Database\nPOSTGRES_HOST=your-db-host\nPOSTGRES_PORT=5432\nPOSTGRES_USER=your-db-user\nPOSTGRES_PASSWORD=your-secure-db-password\nPOSTGRES_DB=your-db-name\n\n# Redis (if enabled)\nREDIS_HOST=your-redis-host\nREDIS_PORT=6379\nREDIS_PASSWORD=your-redis-password\n\n# Logfire\nLOGFIRE_TOKEN=your-logfire-token\nLOGFIRE_ENVIRONMENT=production\n\n# AI Agent (if enabled)\nOPENAI_API_KEY=sk-your-key\n</code></pre>"},{"location":"deployment/#generate-secure-keys","title":"Generate Secure Keys","text":"Bash<pre><code># Generate SECRET_KEY\nopenssl rand -hex 32\n\n# Generate API_KEY\nopenssl rand -hex 32\n\n# Generate database password\nopenssl rand -base64 24\n</code></pre>"},{"location":"deployment/#docker-compose-deployment","title":"Docker Compose Deployment","text":""},{"location":"deployment/#production-configuration","title":"Production Configuration","text":"YAML<pre><code># docker-compose.prod.yml\nversion: '3.8'\n\nservices:\n  backend:\n    build:\n      context: ./backend\n      dockerfile: Dockerfile\n    environment:\n      - ENVIRONMENT=production\n      - POSTGRES_HOST=db\n      - POSTGRES_PORT=5432\n      - POSTGRES_USER=${POSTGRES_USER}\n      - POSTGRES_PASSWORD=${POSTGRES_PASSWORD}\n      - POSTGRES_DB=${POSTGRES_DB}\n      - SECRET_KEY=${SECRET_KEY}\n      - LOGFIRE_TOKEN=${LOGFIRE_TOKEN}\n    ports:\n      - \"8000:8000\"\n    depends_on:\n      db:\n        condition: service_healthy\n    restart: unless-stopped\n    healthcheck:\n      test: [\"CMD\", \"curl\", \"-f\", \"http://localhost:8000/api/v1/health\"]\n      interval: 30s\n      timeout: 10s\n      retries: 3\n\n  db:\n    image: postgres:16-alpine\n    environment:\n      - POSTGRES_USER=${POSTGRES_USER}\n      - POSTGRES_PASSWORD=${POSTGRES_PASSWORD}\n      - POSTGRES_DB=${POSTGRES_DB}\n    volumes:\n      - postgres_data:/var/lib/postgresql/data\n    healthcheck:\n      test: [\"CMD-SHELL\", \"pg_isready -U ${POSTGRES_USER}\"]\n      interval: 10s\n      timeout: 5s\n      retries: 5\n    restart: unless-stopped\n\n  redis:\n    image: redis:7-alpine\n    command: redis-server --requirepass ${REDIS_PASSWORD}\n    volumes:\n      - redis_data:/data\n    restart: unless-stopped\n\n  frontend:\n    build:\n      context: ./frontend\n      dockerfile: Dockerfile\n    environment:\n      - BACKEND_URL=http://backend:8000\n    ports:\n      - \"3000:3000\"\n    depends_on:\n      - backend\n    restart: unless-stopped\n\nvolumes:\n  postgres_data:\n  redis_data:\n</code></pre>"},{"location":"deployment/#deployment-steps","title":"Deployment Steps","text":"<ol> <li> <p>Clone the repository Bash<pre><code>git clone https://github.com/your-org/your-project.git\ncd your-project\n</code></pre></p> </li> <li> <p>Create <code>.env.prod</code> file Bash<pre><code>cp .env.example .env.prod\n# Edit with production values\n</code></pre></p> </li> <li> <p>Build and start services Bash<pre><code>docker compose -f docker-compose.prod.yml --env-file .env.prod up -d --build\n</code></pre></p> </li> <li> <p>Run database migrations Bash<pre><code>docker compose -f docker-compose.prod.yml exec backend alembic upgrade head\n</code></pre></p> </li> <li> <p>Create admin user Bash<pre><code>docker compose -f docker-compose.prod.yml exec backend \\\n  python -m cli.commands user create-admin \\\n  --email admin@example.com\n</code></pre></p> </li> </ol>"},{"location":"deployment/#kubernetes-deployment","title":"Kubernetes Deployment","text":""},{"location":"deployment/#prerequisites_1","title":"Prerequisites","text":"<ul> <li>Kubernetes cluster (GKE, EKS, AKS, or self-managed)</li> <li><code>kubectl</code> configured</li> <li>Container registry access</li> </ul>"},{"location":"deployment/#manifest-files","title":"Manifest Files","text":"<p>The generated project includes Kubernetes manifests in <code>k8s/</code>:</p> Text Only<pre><code>k8s/\n\u251c\u2500\u2500 namespace.yaml\n\u251c\u2500\u2500 configmap.yaml\n\u251c\u2500\u2500 secret.yaml\n\u251c\u2500\u2500 backend/\n\u2502   \u251c\u2500\u2500 deployment.yaml\n\u2502   \u251c\u2500\u2500 service.yaml\n\u2502   \u2514\u2500\u2500 hpa.yaml\n\u251c\u2500\u2500 frontend/\n\u2502   \u251c\u2500\u2500 deployment.yaml\n\u2502   \u2514\u2500\u2500 service.yaml\n\u251c\u2500\u2500 database/\n\u2502   \u251c\u2500\u2500 statefulset.yaml\n\u2502   \u2514\u2500\u2500 service.yaml\n\u2514\u2500\u2500 ingress.yaml\n</code></pre>"},{"location":"deployment/#deployment-steps_1","title":"Deployment Steps","text":"<ol> <li> <p>Create namespace Bash<pre><code>kubectl apply -f k8s/namespace.yaml\n</code></pre></p> </li> <li> <p>Create secrets Bash<pre><code>kubectl create secret generic app-secrets \\\n  --from-literal=secret-key=$(openssl rand -hex 32) \\\n  --from-literal=postgres-password=$(openssl rand -base64 24) \\\n  --from-literal=redis-password=$(openssl rand -base64 24) \\\n  -n your-namespace\n</code></pre></p> </li> <li> <p>Apply configurations Bash<pre><code>kubectl apply -f k8s/configmap.yaml\nkubectl apply -f k8s/database/\nkubectl apply -f k8s/backend/\nkubectl apply -f k8s/frontend/\nkubectl apply -f k8s/ingress.yaml\n</code></pre></p> </li> <li> <p>Run migrations Bash<pre><code>kubectl exec -it deploy/backend -n your-namespace -- alembic upgrade head\n</code></pre></p> </li> </ol>"},{"location":"deployment/#backend-deployment","title":"Backend Deployment","text":"YAML<pre><code># k8s/backend/deployment.yaml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: backend\n  namespace: your-namespace\nspec:\n  replicas: 3\n  selector:\n    matchLabels:\n      app: backend\n  template:\n    metadata:\n      labels:\n        app: backend\n    spec:\n      containers:\n        - name: backend\n          image: your-registry/backend:latest\n          ports:\n            - containerPort: 8000\n          envFrom:\n            - configMapRef:\n                name: app-config\n            - secretRef:\n                name: app-secrets\n          resources:\n            requests:\n              memory: \"256Mi\"\n              cpu: \"250m\"\n            limits:\n              memory: \"512Mi\"\n              cpu: \"500m\"\n          livenessProbe:\n            httpGet:\n              path: /api/v1/health\n              port: 8000\n            initialDelaySeconds: 10\n            periodSeconds: 30\n          readinessProbe:\n            httpGet:\n              path: /api/v1/health/ready\n              port: 8000\n            initialDelaySeconds: 5\n            periodSeconds: 10\n</code></pre>"},{"location":"deployment/#horizontal-pod-autoscaler","title":"Horizontal Pod Autoscaler","text":"YAML<pre><code># k8s/backend/hpa.yaml\napiVersion: autoscaling/v2\nkind: HorizontalPodAutoscaler\nmetadata:\n  name: backend-hpa\n  namespace: your-namespace\nspec:\n  scaleTargetRef:\n    apiVersion: apps/v1\n    kind: Deployment\n    name: backend\n  minReplicas: 2\n  maxReplicas: 10\n  metrics:\n    - type: Resource\n      resource:\n        name: cpu\n        target:\n          type: Utilization\n          averageUtilization: 70\n    - type: Resource\n      resource:\n        name: memory\n        target:\n          type: Utilization\n          averageUtilization: 80\n</code></pre>"},{"location":"deployment/#reverse-proxy-nginx","title":"Reverse Proxy (Nginx)","text":""},{"location":"deployment/#configuration","title":"Configuration","text":"Nginx Configuration File<pre><code># /etc/nginx/sites-available/your-project\nupstream backend {\n    server 127.0.0.1:8000;\n}\n\nupstream frontend {\n    server 127.0.0.1:3000;\n}\n\nserver {\n    listen 80;\n    server_name your-domain.com;\n    return 301 https://$server_name$request_uri;\n}\n\nserver {\n    listen 443 ssl http2;\n    server_name your-domain.com;\n\n    ssl_certificate /etc/letsencrypt/live/your-domain.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/your-domain.com/privkey.pem;\n\n    # API routes\n    location /api {\n        proxy_pass http://backend;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n    }\n\n    # WebSocket support\n    location /api/v1/agent/ws {\n        proxy_pass http://backend;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection \"upgrade\";\n        proxy_set_header Host $host;\n        proxy_read_timeout 86400;\n    }\n\n    # API docs\n    location /docs {\n        proxy_pass http://backend;\n    }\n\n    location /redoc {\n        proxy_pass http://backend;\n    }\n\n    # Frontend\n    location / {\n        proxy_pass http://frontend;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n    }\n}\n</code></pre>"},{"location":"deployment/#database-migrations","title":"Database Migrations","text":""},{"location":"deployment/#running-migrations","title":"Running Migrations","text":"Bash<pre><code># Docker Compose\ndocker compose exec backend alembic upgrade head\n\n# Kubernetes\nkubectl exec -it deploy/backend -- alembic upgrade head\n\n# Direct\ncd backend &amp;&amp; alembic upgrade head\n</code></pre>"},{"location":"deployment/#creating-migrations","title":"Creating Migrations","text":"Bash<pre><code># Generate migration\nalembic revision --autogenerate -m \"Add new table\"\n\n# Apply migration\nalembic upgrade head\n\n# Rollback\nalembic downgrade -1\n</code></pre>"},{"location":"deployment/#monitoring","title":"Monitoring","text":""},{"location":"deployment/#logfire","title":"Logfire","text":"<p>The application is instrumented with Logfire for:</p> <ul> <li>Traces - Request flows and latencies</li> <li>Logs - Structured application logs</li> <li>Metrics - Custom metrics and counters</li> </ul> <p>Access the dashboard at logfire.pydantic.dev.</p>"},{"location":"deployment/#health-checks","title":"Health Checks","text":"Bash<pre><code># Liveness (is the app running?)\ncurl https://your-domain.com/api/v1/health\n\n# Readiness (is the app ready to serve?)\ncurl https://your-domain.com/api/v1/health/ready\n</code></pre>"},{"location":"deployment/#prometheus-if-enabled","title":"Prometheus (if enabled)","text":"<p>Metrics available at <code>/metrics</code>:</p> Bash<pre><code>curl https://your-domain.com/metrics\n</code></pre> <p>Configure Prometheus scraping:</p> YAML<pre><code># prometheus.yml\nscrape_configs:\n  - job_name: 'fastapi'\n    static_configs:\n      - targets: ['backend:8000']\n</code></pre>"},{"location":"deployment/#ssltls","title":"SSL/TLS","text":""},{"location":"deployment/#lets-encrypt-with-certbot","title":"Let's Encrypt with Certbot","text":"Bash<pre><code># Install certbot\nsudo apt install certbot python3-certbot-nginx\n\n# Get certificate\nsudo certbot --nginx -d your-domain.com\n\n# Auto-renewal (cron)\n0 12 * * * /usr/bin/certbot renew --quiet\n</code></pre>"},{"location":"deployment/#backup-recovery","title":"Backup &amp; Recovery","text":""},{"location":"deployment/#database-backup","title":"Database Backup","text":"Bash<pre><code># Backup\ndocker compose exec db pg_dump -U postgres your_db &gt; backup_$(date +%Y%m%d).sql\n\n# Restore\ndocker compose exec -T db psql -U postgres your_db &lt; backup.sql\n</code></pre>"},{"location":"deployment/#automated-backups","title":"Automated Backups","text":"Bash<pre><code># /etc/cron.daily/backup-db\n#!/bin/bash\nBACKUP_DIR=/backups\nDATE=$(date +%Y%m%d)\n\ndocker compose exec db pg_dump -U postgres your_db | gzip &gt; $BACKUP_DIR/db_$DATE.sql.gz\n\n# Keep only last 30 days\nfind $BACKUP_DIR -name \"db_*.sql.gz\" -mtime +30 -delete\n</code></pre>"},{"location":"deployment/#security-checklist","title":"Security Checklist","text":"<ul> <li> Change <code>SECRET_KEY</code> and <code>API_KEY</code></li> <li> Use strong database passwords</li> <li> Enable SSL/TLS everywhere</li> <li> Configure CORS for production domains only</li> <li> Disable debug mode (<code>DEBUG=false</code>)</li> <li> Hide API docs in production (automatic when <code>ENVIRONMENT=production</code>)</li> <li> Set up firewall rules</li> <li> Enable rate limiting</li> <li> Configure Sentry for error tracking</li> <li> Set up log aggregation</li> <li> Regular security updates</li> <li> Database backups</li> <li> Monitor with Logfire</li> </ul>"},{"location":"deployment/#troubleshooting","title":"Troubleshooting","text":""},{"location":"deployment/#container-wont-start","title":"Container won't start","text":"Bash<pre><code># Check logs\ndocker compose logs backend\n\n# Check health\ndocker compose ps\n</code></pre>"},{"location":"deployment/#database-connection-issues","title":"Database connection issues","text":"Bash<pre><code># Verify database is running\ndocker compose exec db pg_isready\n\n# Check connection string\ndocker compose exec backend python -c \"from app.core.config import settings; print(settings.DATABASE_URL)\"\n</code></pre>"},{"location":"deployment/#migration-errors","title":"Migration errors","text":"Bash<pre><code># Check current version\nalembic current\n\n# Check history\nalembic history\n\n# Create fresh migration\nalembic revision --autogenerate -m \"Description\"\n</code></pre>"},{"location":"development/","title":"Development Guide","text":"<p>This guide covers setting up a local development environment for your generated project.</p>"},{"location":"development/#prerequisites","title":"Prerequisites","text":"<ul> <li>Python 3.11+ (3.12 recommended)</li> <li>uv - Fast Python package manager</li> <li>Docker (optional, for databases)</li> <li>Bun - JavaScript runtime (for frontend)</li> <li>PostgreSQL or MongoDB (depending on your choice)</li> </ul>"},{"location":"development/#quick-start","title":"Quick Start","text":""},{"location":"development/#1-generate-project","title":"1. Generate Project","text":"Bash<pre><code># Interactive mode\nfastapi-fullstack new\n\n# Or quick mode\nfastapi-fullstack create my_project --database postgresql --auth jwt\n</code></pre>"},{"location":"development/#2-backend-setup","title":"2. Backend Setup","text":"Bash<pre><code>cd my_project/backend\n\n# Install dependencies\nuv sync\n\n# Copy environment file\ncp .env.example .env\n\n# Start PostgreSQL (Docker)\ndocker run -d \\\n  --name postgres \\\n  -e POSTGRES_PASSWORD=secret \\\n  -e POSTGRES_DB=my_project \\\n  -p 5432:5432 \\\n  postgres:16-alpine\n\n# Run migrations\nalembic upgrade head\n\n# Create admin user\nuv run python -m cli.commands user create-admin --email admin@example.com\n\n# Start development server\nuv run uvicorn app.main:app --reload\n</code></pre>"},{"location":"development/#3-frontend-setup-if-enabled","title":"3. Frontend Setup (if enabled)","text":"Bash<pre><code>cd my_project/frontend\n\n# Install dependencies\nbun install\n\n# Start development server\nbun dev\n</code></pre>"},{"location":"development/#4-access-the-application","title":"4. Access the application","text":"<ul> <li>Backend API: http://localhost:8000</li> <li>API Docs: http://localhost:8000/docs</li> <li>Frontend: http://localhost:3000 (if enabled)</li> </ul>"},{"location":"development/#using-docker-compose","title":"Using Docker Compose","text":"<p>For a complete development environment:</p> Bash<pre><code>cd my_project\n\n# Start all services\ndocker compose up -d\n\n# View logs\ndocker compose logs -f\n\n# Run migrations\ndocker compose exec backend alembic upgrade head\n\n# Stop services\ndocker compose down\n</code></pre>"},{"location":"development/#services","title":"Services","text":"Service Port Description backend 8000 FastAPI application frontend 3000 Next.js application db 5432 PostgreSQL database redis 6379 Redis cache (if enabled) mailcatcher 1080 Email testing UI"},{"location":"development/#environment-variables","title":"Environment Variables","text":""},{"location":"development/#backend-env","title":"Backend (.env)","text":"Bash<pre><code># Application\nENVIRONMENT=local\nDEBUG=true\nPROJECT_NAME=my_project\n\n# Database\nPOSTGRES_HOST=localhost\nPOSTGRES_PORT=5432\nPOSTGRES_USER=postgres\nPOSTGRES_PASSWORD=secret\nPOSTGRES_DB=my_project\n\n# Auth\nSECRET_KEY=change-me-in-production-use-openssl-rand-hex-32\nACCESS_TOKEN_EXPIRE_MINUTES=30\nREFRESH_TOKEN_EXPIRE_MINUTES=10080\n\n# Logfire (optional)\nLOGFIRE_TOKEN=\n\n# Redis (if enabled)\nREDIS_HOST=localhost\nREDIS_PORT=6379\n\n# AI Agent (if enabled)\nOPENAI_API_KEY=sk-...\nAI_MODEL=gpt-4o-mini\n</code></pre>"},{"location":"development/#frontend-envlocal","title":"Frontend (.env.local)","text":"Bash<pre><code># Backend URL (server-side)\nBACKEND_URL=http://localhost:8000\n\n# WebSocket URL (client-side)\nNEXT_PUBLIC_WS_URL=ws://localhost:8000/api/v1/agent/ws\n</code></pre>"},{"location":"development/#project-cli","title":"Project CLI","text":"<p>The generated project includes a CLI for common tasks:</p> Bash<pre><code># Show all commands\nuv run python -m cli.commands --help\n\n# Server commands\nuv run python -m cli.commands server run --reload\nuv run python -m cli.commands server routes\n\n# Database commands\nuv run python -m cli.commands db init\nuv run python -m cli.commands db migrate -m \"Add table\"\nuv run python -m cli.commands db upgrade\nuv run python -m cli.commands db downgrade\n\n# User commands\nuv run python -m cli.commands user create\nuv run python -m cli.commands user create-admin\nuv run python -m cli.commands user list\n\n# Custom commands\nuv run python -m cli.commands cmd seed --count 100\n</code></pre>"},{"location":"development/#using-makefile","title":"Using Makefile","text":"<p>Common commands are available via Makefile:</p> Bash<pre><code># Install dependencies\nmake install\nmake install-dev\n\n# Run development server\nmake run\n\n# Testing\nmake test\nmake test-cov\n\n# Code quality\nmake lint\nmake format\nmake typecheck\n\n# Database\nmake db-init\nmake db-migrate\nmake db-upgrade\n\n# Docker\nmake docker-build\nmake docker-up\nmake docker-down\n</code></pre>"},{"location":"development/#testing","title":"Testing","text":""},{"location":"development/#backend-tests","title":"Backend Tests","text":"Bash<pre><code>cd backend\n\n# Run all tests\npytest\n\n# Run with coverage\npytest --cov=app --cov-report=term-missing\n\n# Run specific test file\npytest tests/api/test_items.py -v\n\n# Run specific test\npytest tests/api/test_items.py::test_create_item -v\n\n# Run with verbose output\npytest -v --tb=short\n\n# Run async tests only\npytest -m asyncio\n</code></pre>"},{"location":"development/#frontend-tests","title":"Frontend Tests","text":"Bash<pre><code>cd frontend\n\n# Unit tests (Vitest)\nbun test\nbun test:run\nbun test:coverage\n\n# E2E tests (Playwright)\nbun test:e2e\nbun test:e2e:ui\nbun test:e2e:headed\n</code></pre>"},{"location":"development/#test-configuration","title":"Test Configuration","text":"Python<pre><code># tests/conftest.py\nimport pytest\nfrom httpx import ASGITransport, AsyncClient\nfrom sqlalchemy.ext.asyncio import create_async_engine, async_sessionmaker\n\nfrom app.main import app\nfrom app.db.base import Base\nfrom app.api.deps import get_db\n\n\n# Test database\nTEST_DATABASE_URL = \"postgresql+asyncpg://postgres:secret@localhost:5432/test_db\"\n\nengine = create_async_engine(TEST_DATABASE_URL)\nTestingSessionLocal = async_sessionmaker(engine, expire_on_commit=False)\n\n\n@pytest.fixture(scope=\"function\")\nasync def db_session():\n    \"\"\"Create a fresh database session for each test.\"\"\"\n    async with engine.begin() as conn:\n        await conn.run_sync(Base.metadata.create_all)\n\n    async with TestingSessionLocal() as session:\n        yield session\n\n    async with engine.begin() as conn:\n        await conn.run_sync(Base.metadata.drop_all)\n\n\n@pytest.fixture\nasync def client(db_session):\n    \"\"\"Create test client with database override.\"\"\"\n    async def override_get_db():\n        yield db_session\n\n    app.dependency_overrides[get_db] = override_get_db\n\n    async with AsyncClient(\n        transport=ASGITransport(app=app),\n        base_url=\"http://test\",\n    ) as client:\n        yield client\n\n    app.dependency_overrides.clear()\n</code></pre>"},{"location":"development/#code-quality","title":"Code Quality","text":""},{"location":"development/#ruff-linting-formatting","title":"Ruff (Linting &amp; Formatting)","text":"Bash<pre><code># Check for issues\nruff check .\n\n# Fix auto-fixable issues\nruff check . --fix\n\n# Format code\nruff format .\n\n# Check formatting\nruff format . --check\n</code></pre>"},{"location":"development/#mypy-type-checking","title":"Mypy (Type Checking)","text":"Bash<pre><code># Run type checker\nmypy app\n\n# With specific options\nmypy app --strict --ignore-missing-imports\n</code></pre>"},{"location":"development/#pre-commit-hooks","title":"Pre-commit Hooks","text":"Bash<pre><code># Install hooks\npre-commit install\n\n# Run on all files\npre-commit run --all-files\n\n# Update hooks\npre-commit autoupdate\n</code></pre> <p>Configuration in <code>.pre-commit-config.yaml</code>:</p> YAML<pre><code>repos:\n  - repo: https://github.com/astral-sh/ruff-pre-commit\n    rev: v0.8.0\n    hooks:\n      - id: ruff\n        args: [--fix]\n      - id: ruff-format\n\n  - repo: https://github.com/pre-commit/mirrors-mypy\n    rev: v1.13.0\n    hooks:\n      - id: mypy\n        additional_dependencies: [pydantic]\n</code></pre>"},{"location":"development/#database-management","title":"Database Management","text":""},{"location":"development/#postgresql","title":"PostgreSQL","text":"Bash<pre><code># Start PostgreSQL container\ndocker run -d \\\n  --name postgres \\\n  -e POSTGRES_PASSWORD=secret \\\n  -e POSTGRES_DB=my_project \\\n  -p 5432:5432 \\\n  postgres:16-alpine\n\n# Connect to database\ndocker exec -it postgres psql -U postgres -d my_project\n\n# Stop container\ndocker stop postgres\ndocker rm postgres\n</code></pre>"},{"location":"development/#migrations-alembic","title":"Migrations (Alembic)","text":"Bash<pre><code># Create migration\nalembic revision --autogenerate -m \"Add users table\"\n\n# Apply migrations\nalembic upgrade head\n\n# Rollback one migration\nalembic downgrade -1\n\n# Rollback to specific revision\nalembic downgrade abc123\n\n# Show current revision\nalembic current\n\n# Show history\nalembic history\n</code></pre>"},{"location":"development/#reset-database","title":"Reset Database","text":"Bash<pre><code># Drop and recreate database\ndocker exec -it postgres psql -U postgres -c \"DROP DATABASE my_project;\"\ndocker exec -it postgres psql -U postgres -c \"CREATE DATABASE my_project;\"\n\n# Re-run migrations\nalembic upgrade head\n</code></pre>"},{"location":"development/#debugging","title":"Debugging","text":""},{"location":"development/#fastapi","title":"FastAPI","text":"Python<pre><code># Add breakpoint\nbreakpoint()\n\n# Or use debugpy for remote debugging\nimport debugpy\ndebugpy.listen(5678)\ndebugpy.wait_for_client()\n</code></pre>"},{"location":"development/#vs-code-launch-configuration","title":"VS Code Launch Configuration","text":"JSON<pre><code>// .vscode/launch.json\n{\n  \"version\": \"0.2.0\",\n  \"configurations\": [\n    {\n      \"name\": \"FastAPI\",\n      \"type\": \"debugpy\",\n      \"request\": \"launch\",\n      \"module\": \"uvicorn\",\n      \"args\": [\"app.main:app\", \"--reload\"],\n      \"cwd\": \"${workspaceFolder}/backend\",\n      \"envFile\": \"${workspaceFolder}/backend/.env\"\n    }\n  ]\n}\n</code></pre>"},{"location":"development/#logfire","title":"Logfire","text":"<p>View traces and logs in the Logfire dashboard:</p> Bash<pre><code># Set token\nexport LOGFIRE_TOKEN=your-token\n\n# Run with Logfire enabled\nuv run uvicorn app.main:app --reload\n</code></pre>"},{"location":"development/#hot-reloading","title":"Hot Reloading","text":""},{"location":"development/#backend","title":"Backend","text":"<p>The development server reloads automatically when files change:</p> Bash<pre><code>uvicorn app.main:app --reload\n</code></pre>"},{"location":"development/#frontend","title":"Frontend","text":"<p>Next.js Fast Refresh is enabled by default:</p> Bash<pre><code>bun dev\n</code></pre>"},{"location":"development/#ide-setup","title":"IDE Setup","text":""},{"location":"development/#vs-code-extensions","title":"VS Code Extensions","text":"<p>Recommended extensions:</p> <ul> <li>Python - Microsoft Python extension</li> <li>Pylance - Type checking and IntelliSense</li> <li>Ruff - Linting and formatting</li> <li>Python Test Explorer - Test discovery and running</li> <li>GitLens - Git integration</li> </ul>"},{"location":"development/#settings","title":"Settings","text":"JSON<pre><code>// .vscode/settings.json\n{\n  \"[python]\": {\n    \"editor.defaultFormatter\": \"charliermarsh.ruff\",\n    \"editor.formatOnSave\": true,\n    \"editor.codeActionsOnSave\": {\n      \"source.fixAll.ruff\": \"explicit\",\n      \"source.organizeImports.ruff\": \"explicit\"\n    }\n  },\n  \"python.analysis.typeCheckingMode\": \"basic\",\n  \"python.testing.pytestEnabled\": true,\n  \"python.testing.pytestArgs\": [\"tests\"]\n}\n</code></pre>"},{"location":"development/#pycharm","title":"PyCharm","text":"<ol> <li>Open the project in PyCharm</li> <li>Set Python interpreter to the virtual environment</li> <li>Mark <code>app</code> as Sources Root</li> <li>Mark <code>tests</code> as Test Sources Root</li> <li>Enable pytest as the test runner</li> </ol>"},{"location":"development/#common-issues","title":"Common Issues","text":""},{"location":"development/#modulenotfounderror-no-module-named-app","title":"\"ModuleNotFoundError: No module named 'app'\"","text":"Bash<pre><code># Ensure you're in the backend directory\ncd backend\n\n# Or set PYTHONPATH\nexport PYTHONPATH=\"${PYTHONPATH}:$(pwd)\"\n</code></pre>"},{"location":"development/#connection-refused-to-database","title":"\"Connection refused\" to database","text":"Bash<pre><code># Check if PostgreSQL is running\ndocker ps | grep postgres\n\n# Start if not running\ndocker start postgres\n</code></pre>"},{"location":"development/#permission-denied-on-docker","title":"\"Permission denied\" on Docker","text":"Bash<pre><code># Add user to docker group\nsudo usermod -aG docker $USER\n\n# Log out and back in, or run\nnewgrp docker\n</code></pre>"},{"location":"development/#alembic-target-database-is-not-up-to-date","title":"Alembic \"Target database is not up to date\"","text":"Bash<pre><code># Check current revision\nalembic current\n\n# Stamp as current (if database was created manually)\nalembic stamp head\n</code></pre>"},{"location":"frontend/","title":"Frontend Documentation","text":"<p>This document describes the Next.js frontend architecture.</p>"},{"location":"frontend/#technology-stack","title":"Technology Stack","text":"Technology Version Purpose Next.js 15.x React framework with App Router React 19.x UI library TypeScript 5.x Type safety Tailwind CSS 4.x Styling Zustand 5.x State management TanStack Query 5.x Server state management Bun Latest Package manager &amp; runtime"},{"location":"frontend/#project-structure","title":"Project Structure","text":"Text Only<pre><code>frontend/\n\u251c\u2500\u2500 src/\n\u2502   \u251c\u2500\u2500 app/                    # Next.js App Router\n\u2502   \u2502   \u251c\u2500\u2500 layout.tsx          # Root layout\n\u2502   \u2502   \u251c\u2500\u2500 page.tsx            # Home page\n\u2502   \u2502   \u251c\u2500\u2500 providers.tsx       # Client providers\n\u2502   \u2502   \u251c\u2500\u2500 (auth)/             # Auth route group\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 login/\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 register/\n\u2502   \u2502   \u251c\u2500\u2500 (dashboard)/        # Protected route group\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 layout.tsx\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 dashboard/\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 chat/\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 profile/\n\u2502   \u2502   \u2514\u2500\u2500 api/                # API routes (BFF)\n\u2502   \u2502       \u251c\u2500\u2500 health/\n\u2502   \u2502       \u2514\u2500\u2500 auth/\n\u2502   \u2502           \u251c\u2500\u2500 login/\n\u2502   \u2502           \u251c\u2500\u2500 logout/\n\u2502   \u2502           \u251c\u2500\u2500 register/\n\u2502   \u2502           \u251c\u2500\u2500 refresh/\n\u2502   \u2502           \u2514\u2500\u2500 me/\n\u2502   \u2502\n\u2502   \u251c\u2500\u2500 components/             # React components\n\u2502   \u2502   \u251c\u2500\u2500 ui/                 # Base UI components\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 button.tsx\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 input.tsx\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 card.tsx\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 ...\n\u2502   \u2502   \u251c\u2500\u2500 layout/             # Layout components\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 header.tsx\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 sidebar.tsx\n\u2502   \u2502   \u251c\u2500\u2500 auth/               # Auth components\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 login-form.tsx\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 register-form.tsx\n\u2502   \u2502   \u251c\u2500\u2500 chat/               # Chat components\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 chat-container.tsx\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 chat-input.tsx\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 message-list.tsx\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 message-item.tsx\n\u2502   \u2502   \u2514\u2500\u2500 theme/              # Theme components\n\u2502   \u2502       \u251c\u2500\u2500 theme-provider.tsx\n\u2502   \u2502       \u2514\u2500\u2500 theme-toggle.tsx\n\u2502   \u2502\n\u2502   \u251c\u2500\u2500 hooks/                  # Custom React hooks\n\u2502   \u2502   \u251c\u2500\u2500 use-auth.ts\n\u2502   \u2502   \u251c\u2500\u2500 use-websocket.ts\n\u2502   \u2502   \u251c\u2500\u2500 use-chat.ts\n\u2502   \u2502   \u2514\u2500\u2500 use-conversations.ts\n\u2502   \u2502\n\u2502   \u251c\u2500\u2500 stores/                 # Zustand stores\n\u2502   \u2502   \u251c\u2500\u2500 auth-store.ts\n\u2502   \u2502   \u251c\u2500\u2500 chat-store.ts\n\u2502   \u2502   \u251c\u2500\u2500 conversation-store.ts\n\u2502   \u2502   \u2514\u2500\u2500 theme-store.ts\n\u2502   \u2502\n\u2502   \u251c\u2500\u2500 lib/                    # Utilities\n\u2502   \u2502   \u251c\u2500\u2500 api-client.ts       # Fetch wrapper\n\u2502   \u2502   \u251c\u2500\u2500 server-api.ts       # Server-side API calls\n\u2502   \u2502   \u251c\u2500\u2500 utils.ts            # Helper functions\n\u2502   \u2502   \u2514\u2500\u2500 constants.ts\n\u2502   \u2502\n\u2502   \u251c\u2500\u2500 types/                  # TypeScript types\n\u2502   \u2502   \u251c\u2500\u2500 api.ts\n\u2502   \u2502   \u251c\u2500\u2500 auth.ts\n\u2502   \u2502   \u251c\u2500\u2500 chat.ts\n\u2502   \u2502   \u2514\u2500\u2500 conversation.ts\n\u2502   \u2502\n\u2502   \u2514\u2500\u2500 middleware.ts           # Next.js middleware\n\u2502\n\u251c\u2500\u2500 e2e/                        # Playwright tests\n\u2502   \u251c\u2500\u2500 auth.setup.ts\n\u2502   \u251c\u2500\u2500 auth.spec.ts\n\u2502   \u251c\u2500\u2500 home.spec.ts\n\u2502   \u2514\u2500\u2500 chat.spec.ts\n\u2502\n\u251c\u2500\u2500 messages/                   # i18n translations\n\u2502   \u251c\u2500\u2500 en.json\n\u2502   \u2514\u2500\u2500 pl.json\n\u2502\n\u251c\u2500\u2500 public/                     # Static assets\n\u251c\u2500\u2500 package.json\n\u251c\u2500\u2500 tsconfig.json\n\u251c\u2500\u2500 tailwind.config.ts\n\u251c\u2500\u2500 playwright.config.ts\n\u2514\u2500\u2500 vitest.config.ts\n</code></pre>"},{"location":"frontend/#authentication","title":"Authentication","text":""},{"location":"frontend/#overview","title":"Overview","text":"<p>Authentication uses HTTP-only cookies for secure token storage:</p> <ol> <li>Login - Backend returns JWT tokens</li> <li>Cookies - Frontend API routes set HTTP-only cookies</li> <li>Requests - Cookies sent automatically with each request</li> <li>Refresh - Automatic token refresh before expiry</li> </ol>"},{"location":"frontend/#auth-store","title":"Auth Store","text":"TypeScript<pre><code>// src/stores/auth-store.ts\nimport { create } from 'zustand';\nimport { persist } from 'zustand/middleware';\n\ninterface User {\n  id: string;\n  email: string;\n  role: 'user' | 'admin';\n  is_superuser: boolean;\n}\n\ninterface AuthState {\n  user: User | null;\n  isAuthenticated: boolean;\n  isLoading: boolean;\n  setUser: (user: User | null) =&gt; void;\n  logout: () =&gt; void;\n}\n\nexport const useAuthStore = create&lt;AuthState&gt;()(\n  persist(\n    (set) =&gt; ({\n      user: null,\n      isAuthenticated: false,\n      isLoading: true,\n      setUser: (user) =&gt; set({ user, isAuthenticated: !!user, isLoading: false }),\n      logout: () =&gt; set({ user: null, isAuthenticated: false }),\n    }),\n    {\n      name: 'auth-storage',\n      partialize: (state) =&gt; ({ user: state.user }),\n    }\n  )\n);\n</code></pre>"},{"location":"frontend/#auth-hook","title":"Auth Hook","text":"TypeScript<pre><code>// src/hooks/use-auth.ts\nimport { useCallback, useEffect } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { useAuthStore } from '@/stores/auth-store';\n\nexport function useAuth() {\n  const router = useRouter();\n  const { user, isAuthenticated, isLoading, setUser, logout: storeLogout } = useAuthStore();\n\n  // Check auth status on mount\n  useEffect(() =&gt; {\n    const checkAuth = async () =&gt; {\n      try {\n        const res = await fetch('/api/auth/me');\n        if (res.ok) {\n          const data = await res.json();\n          setUser(data.user);\n        } else {\n          setUser(null);\n        }\n      } catch {\n        setUser(null);\n      }\n    };\n    checkAuth();\n  }, [setUser]);\n\n  const login = useCallback(async (email: string, password: string) =&gt; {\n    const res = await fetch('/api/auth/login', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ email, password }),\n    });\n\n    if (!res.ok) {\n      throw new Error('Invalid credentials');\n    }\n\n    const data = await res.json();\n    setUser(data.user);\n    router.push('/dashboard');\n  }, [router, setUser]);\n\n  const logout = useCallback(async () =&gt; {\n    await fetch('/api/auth/logout', { method: 'POST' });\n    storeLogout();\n    router.push('/login');\n  }, [router, storeLogout]);\n\n  return { user, isAuthenticated, isLoading, login, logout };\n}\n</code></pre>"},{"location":"frontend/#api-routes-bff-pattern","title":"API Routes (BFF Pattern)","text":"<p>Backend-for-Frontend routes handle token storage:</p> TypeScript<pre><code>// src/app/api/auth/login/route.ts\nimport { NextRequest, NextResponse } from 'next/server';\nimport { cookies } from 'next/headers';\n\nconst API_URL = process.env.BACKEND_URL || 'http://localhost:8000';\n\nexport async function POST(request: NextRequest) {\n  const body = await request.json();\n\n  const res = await fetch(`${API_URL}/api/v1/auth/login`, {\n    method: 'POST',\n    headers: { 'Content-Type': 'application/x-www-form-urlencoded' },\n    body: new URLSearchParams({\n      username: body.email,\n      password: body.password,\n    }),\n  });\n\n  if (!res.ok) {\n    return NextResponse.json({ error: 'Invalid credentials' }, { status: 401 });\n  }\n\n  const data = await res.json();\n\n  // Set HTTP-only cookies\n  const cookieStore = await cookies();\n  cookieStore.set('access_token', data.access_token, {\n    httpOnly: true,\n    secure: process.env.NODE_ENV === 'production',\n    sameSite: 'lax',\n    maxAge: 60 * 30, // 30 minutes\n  });\n  cookieStore.set('refresh_token', data.refresh_token, {\n    httpOnly: true,\n    secure: process.env.NODE_ENV === 'production',\n    sameSite: 'lax',\n    maxAge: 60 * 60 * 24 * 7, // 7 days\n  });\n\n  return NextResponse.json({ user: data.user });\n}\n</code></pre>"},{"location":"frontend/#protected-routes","title":"Protected Routes","text":"<p>Use middleware to protect routes:</p> TypeScript<pre><code>// src/middleware.ts\nimport { NextResponse } from 'next/server';\nimport type { NextRequest } from 'next/server';\n\nconst protectedPaths = ['/dashboard', '/chat', '/profile'];\nconst authPaths = ['/login', '/register'];\n\nexport function middleware(request: NextRequest) {\n  const { pathname } = request.nextUrl;\n  const accessToken = request.cookies.get('access_token')?.value;\n\n  // Redirect to login if accessing protected route without token\n  if (protectedPaths.some((path) =&gt; pathname.startsWith(path))) {\n    if (!accessToken) {\n      return NextResponse.redirect(new URL('/login', request.url));\n    }\n  }\n\n  // Redirect to dashboard if accessing auth routes with token\n  if (authPaths.some((path) =&gt; pathname.startsWith(path))) {\n    if (accessToken) {\n      return NextResponse.redirect(new URL('/dashboard', request.url));\n    }\n  }\n\n  return NextResponse.next();\n}\n\nexport const config = {\n  matcher: ['/((?!api|_next/static|_next/image|favicon.ico).*)'],\n};\n</code></pre>"},{"location":"frontend/#ai-chat","title":"AI Chat","text":""},{"location":"frontend/#websocket-connection","title":"WebSocket Connection","text":"TypeScript<pre><code>// src/hooks/use-websocket.ts\nimport { useCallback, useEffect, useRef, useState } from 'react';\n\ninterface UseWebSocketOptions {\n  onMessage?: (data: any) =&gt; void;\n  onOpen?: () =&gt; void;\n  onClose?: () =&gt; void;\n  onError?: (error: Event) =&gt; void;\n}\n\nexport function useWebSocket(url: string, options: UseWebSocketOptions = {}) {\n  const [isConnected, setIsConnected] = useState(false);\n  const wsRef = useRef&lt;WebSocket | null&gt;(null);\n\n  const connect = useCallback(() =&gt; {\n    const ws = new WebSocket(url);\n\n    ws.onopen = () =&gt; {\n      setIsConnected(true);\n      options.onOpen?.();\n    };\n\n    ws.onclose = () =&gt; {\n      setIsConnected(false);\n      options.onClose?.();\n    };\n\n    ws.onmessage = (event) =&gt; {\n      const data = JSON.parse(event.data);\n      options.onMessage?.(data);\n    };\n\n    ws.onerror = (error) =&gt; {\n      options.onError?.(error);\n    };\n\n    wsRef.current = ws;\n  }, [url, options]);\n\n  const disconnect = useCallback(() =&gt; {\n    wsRef.current?.close();\n    wsRef.current = null;\n  }, []);\n\n  const send = useCallback((data: any) =&gt; {\n    if (wsRef.current?.readyState === WebSocket.OPEN) {\n      wsRef.current.send(JSON.stringify(data));\n    }\n  }, []);\n\n  useEffect(() =&gt; {\n    return () =&gt; disconnect();\n  }, [disconnect]);\n\n  return { isConnected, connect, disconnect, send };\n}\n</code></pre>"},{"location":"frontend/#chat-hook","title":"Chat Hook","text":"TypeScript<pre><code>// src/hooks/use-chat.ts\nimport { useCallback, useState } from 'react';\nimport { useChatStore } from '@/stores/chat-store';\nimport { useWebSocket } from './use-websocket';\n\nconst WS_URL = process.env.NEXT_PUBLIC_WS_URL || 'ws://localhost:8000/api/v1/agent/ws';\n\nexport function useChat() {\n  const [isStreaming, setIsStreaming] = useState(false);\n  const { messages, addMessage, updateLastMessage, clearMessages } = useChatStore();\n\n  const handleMessage = useCallback((data: any) =&gt; {\n    switch (data.type) {\n      case 'start':\n        setIsStreaming(true);\n        addMessage({ role: 'assistant', content: '' });\n        break;\n      case 'token':\n        updateLastMessage((prev) =&gt; prev + data.content);\n        break;\n      case 'tool_call':\n        addMessage({\n          role: 'tool',\n          content: JSON.stringify(data.tool),\n          tool_name: data.tool.name,\n        });\n        break;\n      case 'end':\n        setIsStreaming(false);\n        break;\n      case 'error':\n        setIsStreaming(false);\n        console.error('Chat error:', data.error);\n        break;\n    }\n  }, [addMessage, updateLastMessage]);\n\n  const { isConnected, connect, disconnect, send } = useWebSocket(WS_URL, {\n    onMessage: handleMessage,\n  });\n\n  const sendMessage = useCallback((content: string) =&gt; {\n    addMessage({ role: 'user', content });\n    send({ type: 'message', content, history: messages });\n  }, [addMessage, messages, send]);\n\n  return {\n    messages,\n    isConnected,\n    isStreaming,\n    connect,\n    disconnect,\n    sendMessage,\n    clearMessages,\n  };\n}\n</code></pre>"},{"location":"frontend/#chat-container","title":"Chat Container","text":"TSX<pre><code>// src/components/chat/chat-container.tsx\n'use client';\n\nimport { useEffect } from 'react';\nimport { useChat } from '@/hooks/use-chat';\nimport { ChatInput } from './chat-input';\nimport { MessageList } from './message-list';\n\nexport function ChatContainer() {\n  const { messages, isConnected, isStreaming, connect, disconnect, sendMessage } = useChat();\n\n  useEffect(() =&gt; {\n    connect();\n    return () =&gt; disconnect();\n  }, [connect, disconnect]);\n\n  return (\n    &lt;div className=\"flex h-full flex-col\"&gt;\n      &lt;div className=\"flex-1 overflow-y-auto\"&gt;\n        &lt;MessageList messages={messages} isStreaming={isStreaming} /&gt;\n      &lt;/div&gt;\n      &lt;ChatInput onSend={sendMessage} disabled={!isConnected || isStreaming} /&gt;\n    &lt;/div&gt;\n  );\n}\n</code></pre>"},{"location":"frontend/#state-management","title":"State Management","text":""},{"location":"frontend/#zustand-stores","title":"Zustand Stores","text":"TypeScript<pre><code>// src/stores/chat-store.ts\nimport { create } from 'zustand';\nimport { nanoid } from 'nanoid';\n\ninterface Message {\n  id: string;\n  role: 'user' | 'assistant' | 'tool';\n  content: string;\n  tool_name?: string;\n  created_at: Date;\n}\n\ninterface ChatState {\n  messages: Message[];\n  addMessage: (message: Omit&lt;Message, 'id' | 'created_at'&gt;) =&gt; void;\n  updateLastMessage: (updater: (content: string) =&gt; string) =&gt; void;\n  clearMessages: () =&gt; void;\n}\n\nexport const useChatStore = create&lt;ChatState&gt;((set) =&gt; ({\n  messages: [],\n\n  addMessage: (message) =&gt;\n    set((state) =&gt; ({\n      messages: [\n        ...state.messages,\n        { ...message, id: nanoid(), created_at: new Date() },\n      ],\n    })),\n\n  updateLastMessage: (updater) =&gt;\n    set((state) =&gt; ({\n      messages: state.messages.map((msg, idx) =&gt;\n        idx === state.messages.length - 1\n          ? { ...msg, content: updater(msg.content) }\n          : msg\n      ),\n    })),\n\n  clearMessages: () =&gt; set({ messages: [] }),\n}));\n</code></pre>"},{"location":"frontend/#tanstack-query","title":"TanStack Query","text":"<p>For server state management:</p> TypeScript<pre><code>// src/lib/api-client.ts\nimport { QueryClient } from '@tanstack/react-query';\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      staleTime: 1000 * 60 * 5, // 5 minutes\n      retry: 1,\n    },\n  },\n});\n\n// Example hook\nexport function useItems() {\n  return useQuery({\n    queryKey: ['items'],\n    queryFn: async () =&gt; {\n      const res = await fetch('/api/items');\n      if (!res.ok) throw new Error('Failed to fetch items');\n      return res.json();\n    },\n  });\n}\n</code></pre>"},{"location":"frontend/#ui-components","title":"UI Components","text":""},{"location":"frontend/#button-component","title":"Button Component","text":"TSX<pre><code>// src/components/ui/button.tsx\nimport { forwardRef } from 'react';\nimport { cva, type VariantProps } from 'class-variance-authority';\nimport { cn } from '@/lib/utils';\n\nconst buttonVariants = cva(\n  'inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50',\n  {\n    variants: {\n      variant: {\n        default: 'bg-primary text-primary-foreground hover:bg-primary/90',\n        destructive: 'bg-destructive text-destructive-foreground hover:bg-destructive/90',\n        outline: 'border border-input bg-background hover:bg-accent hover:text-accent-foreground',\n        secondary: 'bg-secondary text-secondary-foreground hover:bg-secondary/80',\n        ghost: 'hover:bg-accent hover:text-accent-foreground',\n        link: 'text-primary underline-offset-4 hover:underline',\n      },\n      size: {\n        default: 'h-10 px-4 py-2',\n        sm: 'h-9 rounded-md px-3',\n        lg: 'h-11 rounded-md px-8',\n        icon: 'h-10 w-10',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'default',\n    },\n  }\n);\n\ninterface ButtonProps\n  extends React.ButtonHTMLAttributes&lt;HTMLButtonElement&gt;,\n    VariantProps&lt;typeof buttonVariants&gt; {}\n\nconst Button = forwardRef&lt;HTMLButtonElement, ButtonProps&gt;(\n  ({ className, variant, size, ...props }, ref) =&gt; {\n    return (\n      &lt;button\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      /&gt;\n    );\n  }\n);\nButton.displayName = 'Button';\n\nexport { Button, buttonVariants };\n</code></pre>"},{"location":"frontend/#testing","title":"Testing","text":""},{"location":"frontend/#unit-tests-vitest","title":"Unit Tests (Vitest)","text":"TypeScript<pre><code>// src/lib/utils.test.ts\nimport { describe, it, expect } from 'vitest';\nimport { cn } from './utils';\n\ndescribe('cn utility', () =&gt; {\n  it('merges class names', () =&gt; {\n    expect(cn('foo', 'bar')).toBe('foo bar');\n  });\n\n  it('handles conditional classes', () =&gt; {\n    expect(cn('foo', false &amp;&amp; 'bar', 'baz')).toBe('foo baz');\n  });\n\n  it('merges Tailwind classes correctly', () =&gt; {\n    expect(cn('p-4', 'p-2')).toBe('p-2');\n  });\n});\n</code></pre>"},{"location":"frontend/#e2e-tests-playwright","title":"E2E Tests (Playwright)","text":"TypeScript<pre><code>// e2e/auth.spec.ts\nimport { test, expect } from '@playwright/test';\n\ntest.describe('Authentication', () =&gt; {\n  test('should login successfully', async ({ page }) =&gt; {\n    await page.goto('/login');\n\n    await page.fill('input[name=\"email\"]', 'test@example.com');\n    await page.fill('input[name=\"password\"]', 'password123');\n    await page.click('button[type=\"submit\"]');\n\n    await expect(page).toHaveURL('/dashboard');\n    await expect(page.locator('text=Dashboard')).toBeVisible();\n  });\n\n  test('should show error for invalid credentials', async ({ page }) =&gt; {\n    await page.goto('/login');\n\n    await page.fill('input[name=\"email\"]', 'wrong@example.com');\n    await page.fill('input[name=\"password\"]', 'wrongpassword');\n    await page.click('button[type=\"submit\"]');\n\n    await expect(page.locator('text=Invalid credentials')).toBeVisible();\n  });\n});\n</code></pre>"},{"location":"frontend/#running-tests","title":"Running Tests","text":"Bash<pre><code># Unit tests\nbun test\nbun test:run        # CI mode\nbun test:coverage   # With coverage\nbun test:ui         # UI mode\n\n# E2E tests\nbun test:e2e\nbun test:e2e:ui     # UI mode\nbun test:e2e:headed # With browser\nbun test:e2e:debug  # Debug mode\n</code></pre>"},{"location":"frontend/#internationalization-i18n","title":"Internationalization (i18n)","text":"<p>When enabled, uses <code>next-intl</code>:</p> TypeScript<pre><code>// src/i18n.ts\nimport { getRequestConfig } from 'next-intl/server';\n\nexport default getRequestConfig(async ({ locale }) =&gt; ({\n  messages: (await import(`../messages/${locale}.json`)).default,\n}));\n</code></pre> JSON<pre><code>// messages/en.json\n{\n  \"common\": {\n    \"login\": \"Login\",\n    \"logout\": \"Logout\",\n    \"loading\": \"Loading...\"\n  },\n  \"auth\": {\n    \"email\": \"Email\",\n    \"password\": \"Password\",\n    \"loginButton\": \"Sign in\"\n  }\n}\n</code></pre> <p>Usage in components:</p> TSX<pre><code>import { useTranslations } from 'next-intl';\n\nexport function LoginForm() {\n  const t = useTranslations('auth');\n\n  return (\n    &lt;form&gt;\n      &lt;label&gt;{t('email')}&lt;/label&gt;\n      &lt;input name=\"email\" /&gt;\n      &lt;button&gt;{t('loginButton')}&lt;/button&gt;\n    &lt;/form&gt;\n  );\n}\n</code></pre>"},{"location":"frontend/#dark-mode","title":"Dark Mode","text":""},{"location":"frontend/#theme-store","title":"Theme Store","text":"TypeScript<pre><code>// src/stores/theme-store.ts\nimport { create } from 'zustand';\nimport { persist } from 'zustand/middleware';\n\ntype Theme = 'light' | 'dark' | 'system';\n\ninterface ThemeState {\n  theme: Theme;\n  setTheme: (theme: Theme) =&gt; void;\n}\n\nexport const useThemeStore = create&lt;ThemeState&gt;()(\n  persist(\n    (set) =&gt; ({\n      theme: 'system',\n      setTheme: (theme) =&gt; set({ theme }),\n    }),\n    { name: 'theme-storage' }\n  )\n);\n</code></pre>"},{"location":"frontend/#theme-provider","title":"Theme Provider","text":"TSX<pre><code>// src/components/theme/theme-provider.tsx\n'use client';\n\nimport { useEffect } from 'react';\nimport { useThemeStore } from '@/stores/theme-store';\n\nexport function ThemeProvider({ children }: { children: React.ReactNode }) {\n  const { theme } = useThemeStore();\n\n  useEffect(() =&gt; {\n    const root = window.document.documentElement;\n    root.classList.remove('light', 'dark');\n\n    if (theme === 'system') {\n      const systemTheme = window.matchMedia('(prefers-color-scheme: dark)').matches\n        ? 'dark'\n        : 'light';\n      root.classList.add(systemTheme);\n    } else {\n      root.classList.add(theme);\n    }\n  }, [theme]);\n\n  return &lt;&gt;{children}&lt;/&gt;;\n}\n</code></pre>"},{"location":"frontend/#development-commands","title":"Development Commands","text":"Bash<pre><code># Start development server\nbun dev\n\n# Build for production\nbun build\n\n# Start production server\nbun start\n\n# Linting\nbun lint\nbun lint:fix\n\n# Formatting\nbun format\nbun format:check\n\n# Type checking\nbun type-check\n\n# Testing\nbun test\nbun test:e2e\n</code></pre>"},{"location":"frontend/#environment-variables","title":"Environment Variables","text":"Bash<pre><code># .env.local\n\n# Backend API URL (for server-side)\nBACKEND_URL=http://localhost:8000\n\n# Public WebSocket URL (for client-side)\nNEXT_PUBLIC_WS_URL=ws://localhost:8000/api/v1/agent/ws\n\n# OpenTelemetry (if Logfire enabled)\nOTEL_EXPORTER_OTLP_ENDPOINT=https://logfire-api.pydantic.dev\n</code></pre>"},{"location":"getting-help/","title":"Getting Help","text":""},{"location":"getting-help/#documentation","title":"Documentation","text":"<ul> <li>Installation - Setup guide</li> <li>Quick Start - First project walkthrough</li> <li>Architecture - Project structure and patterns</li> <li>AI Agents - AI framework configuration</li> <li>Deployment - Production deployment guides</li> </ul>"},{"location":"getting-help/#github","title":"GitHub","text":"<ul> <li>Issues - Report bugs or request features</li> <li>Discussions - Ask questions and share ideas</li> <li>Pull Requests - Contribute to the project</li> </ul>"},{"location":"getting-help/#faq","title":"FAQ","text":""},{"location":"getting-help/#which-ai-framework-should-i-choose","title":"Which AI framework should I choose?","text":"Use Case Recommended Type-safe agents with Pydantic PydanticAI Complex workflows and chains LangChain Stateful agent workflows LangGraph Multi-agent collaboration CrewAI"},{"location":"getting-help/#which-database-should-i-use","title":"Which database should I use?","text":"Use Case Recommended Relational data, complex queries PostgreSQL Document storage, flexible schema MongoDB Simple apps, local development SQLite"},{"location":"getting-help/#how-do-i-add-authentication","title":"How do I add authentication?","text":"<p>Choose during project generation:</p> Bash<pre><code>fastapi-fullstack create my_app --auth jwt     # JWT tokens\nfastapi-fullstack create my_app --auth api_key # API keys\nfastapi-fullstack create my_app --auth both    # Both methods\n</code></pre>"},{"location":"getting-help/#how-do-i-deploy-to-production","title":"How do I deploy to production?","text":"<p>Generated projects include:</p> <ul> <li><code>Dockerfile</code> for containerization</li> <li><code>docker-compose.yml</code> for local development</li> <li>Optional Kubernetes manifests</li> <li>GitHub Actions / GitLab CI pipelines</li> </ul> <p>See Deployment Guide for details.</p>"},{"location":"getting-help/#related-projects","title":"Related Projects","text":"<ul> <li>pydantic-deep - Deep agent framework with planning and subagents</li> <li>pydantic-ai - The foundation for PydanticAI agents</li> <li>FastAPI - The web framework powering the backend</li> </ul>"},{"location":"installation/","title":"Installation","text":""},{"location":"installation/#requirements","title":"Requirements","text":"<ul> <li>Python 3.11+</li> <li>uv (recommended) or pip</li> </ul>"},{"location":"installation/#install-fastapi-fullstack","title":"Install fastapi-fullstack","text":"uv (recommended)pippipx Bash<pre><code>uv tool install fastapi-fullstack\n</code></pre> Bash<pre><code>pip install fastapi-fullstack\n</code></pre> Bash<pre><code>pipx install fastapi-fullstack\n</code></pre>"},{"location":"installation/#verify-installation","title":"Verify Installation","text":"Bash<pre><code>fastapi-fullstack --version\n</code></pre>"},{"location":"installation/#create-your-first-project","title":"Create Your First Project","text":"Bash<pre><code># Interactive wizard (recommended)\nfastapi-fullstack new\n\n# Quick mode with options\nfastapi-fullstack create my_app \\\n  --database postgresql \\\n  --auth jwt \\\n  --frontend nextjs\n\n# Use presets\nfastapi-fullstack create my_app --preset ai-agent\n</code></pre>"},{"location":"installation/#available-presets","title":"Available Presets","text":"Preset Description <code>--preset production</code> Full production setup with Redis, Sentry, Kubernetes, Prometheus <code>--preset ai-agent</code> AI agent with WebSocket streaming and conversation persistence <code>--minimal</code> Minimal project with no extras"},{"location":"installation/#project-dependencies","title":"Project Dependencies","text":"<p>Generated projects use uv for dependency management:</p> Bash<pre><code>cd my_app/backend\nmake install  # Installs all dependencies\n</code></pre>"},{"location":"installation/#next-steps","title":"Next Steps","text":"<ul> <li>Quick Start - Set up your development environment</li> <li>Configuration - Learn about configuration options</li> <li>AI Agents - Configure AI frameworks</li> </ul>"},{"location":"observability/","title":"Observability with Logfire","text":"<p>Logfire is a modern observability platform built by the Pydantic team. It provides first-class support for Python applications, especially those using Pydantic, FastAPI, and PydanticAI.</p>"},{"location":"observability/#why-logfire","title":"Why Logfire?","text":"<ul> <li>Built for Python - Native support for async, type hints, and Pydantic models</li> <li>AI-First - Deep integration with PydanticAI for agent observability</li> <li>OpenTelemetry Compatible - Works with any OTEL instrumentation</li> <li>Beautiful UI - Modern dashboard with powerful query capabilities</li> </ul>"},{"location":"observability/#supported-integrations","title":"Supported Integrations","text":""},{"location":"observability/#pydanticai-agents","title":"PydanticAI Agents","text":"<p>Full visibility into AI agent execution:</p> Python<pre><code>import logfire\nfrom pydantic_ai import Agent\n\nlogfire.configure()\nlogfire.instrument_pydantic_ai()\n\nagent = Agent(\"openai:gpt-4o-mini\")\n\n# All agent runs are automatically traced\nresult = await agent.run(\"Hello!\")\n</code></pre> <p>What you see in Logfire: - Agent run duration and status - Tool calls with arguments and results - LLM requests and responses - Token usage and costs - Streaming events</p>"},{"location":"observability/#fastapi","title":"FastAPI","text":"<p>Automatic request/response tracing:</p> Python<pre><code>from fastapi import FastAPI\nimport logfire\n\napp = FastAPI()\nlogfire.configure()\nlogfire.instrument_fastapi(app)\n</code></pre> <p>What you see: - Request method, path, status code - Request/response latency - Query parameters and headers - Exception details on errors</p>"},{"location":"observability/#databases","title":"Databases","text":""},{"location":"observability/#postgresql-asyncpg","title":"PostgreSQL (asyncpg)","text":"Python<pre><code>import logfire\n\nlogfire.instrument_asyncpg()\n</code></pre> <p>What you see: - Query text and parameters - Execution time - Row counts - Connection pool stats</p>"},{"location":"observability/#mongodb-pymongomotor","title":"MongoDB (PyMongo/Motor)","text":"Python<pre><code>import logfire\n\nlogfire.instrument_pymongo()\n</code></pre> <p>What you see: - Collection operations - Query filters - Execution time - Document counts</p>"},{"location":"observability/#redis","title":"Redis","text":"Python<pre><code>import logfire\n\nlogfire.instrument_redis()\n</code></pre> <p>What you see: - Command type (GET, SET, etc.) - Key patterns - Latency - Cache hit/miss patterns</p>"},{"location":"observability/#background-tasks","title":"Background Tasks","text":""},{"location":"observability/#celery","title":"Celery","text":"Python<pre><code>import logfire\n\nlogfire.instrument_celery()\n</code></pre> <p>What you see: - Task name and arguments - Execution time - Worker info - Retry attempts - Queue depth</p>"},{"location":"observability/#taskiq","title":"Taskiq","text":"Python<pre><code>import logfire\n\nlogfire.instrument_taskiq()\n</code></pre>"},{"location":"observability/#http-clients-httpx","title":"HTTP Clients (HTTPX)","text":"Python<pre><code>import logfire\n\nlogfire.instrument_httpx()\n</code></pre> <p>What you see: - Request URL and method - Response status code - Latency - Request/response size</p>"},{"location":"observability/#configuration","title":"Configuration","text":""},{"location":"observability/#environment-variables","title":"Environment Variables","text":"Bash<pre><code># Required\nLOGFIRE_TOKEN=your-token-here\n\n# Optional\nLOGFIRE_PROJECT_NAME=my-project\nLOGFIRE_ENVIRONMENT=production\nLOGFIRE_SERVICE_VERSION=1.0.0\n</code></pre>"},{"location":"observability/#selective-instrumentation","title":"Selective Instrumentation","text":"<p>In the generator, you can choose which components to instrument:</p> Bash<pre><code>fastapi-fullstack new\n# \u2713 Enable Logfire observability\n#   \u2713 Instrument FastAPI\n#   \u2713 Instrument Database\n#   \u2713 Instrument Redis\n#   \u2713 Instrument Celery\n#   \u2713 Instrument HTTPX\n</code></pre>"},{"location":"observability/#generated-code","title":"Generated Code","text":"<p>When Logfire is enabled, your <code>app/main.py</code> includes:</p> Python<pre><code>import logfire\n\n# Configure Logfire\nlogfire.configure()\n\n# Instrument based on your selections\nlogfire.instrument_fastapi(app)\nlogfire.instrument_asyncpg()  # if PostgreSQL\nlogfire.instrument_pymongo()  # if MongoDB\nlogfire.instrument_redis()    # if Redis\nlogfire.instrument_celery()   # if Celery\nlogfire.instrument_httpx()    # if HTTPX instrumentation enabled\n</code></pre>"},{"location":"observability/#custom-instrumentation","title":"Custom Instrumentation","text":""},{"location":"observability/#manual-spans","title":"Manual Spans","text":"<p>Add custom spans for important operations:</p> Python<pre><code>import logfire\n\nasync def process_order(order: Order):\n    with logfire.span(\"process_order\", order_id=str(order.id)):\n        with logfire.span(\"validate\"):\n            await validate_order(order)\n\n        with logfire.span(\"charge_payment\"):\n            await charge_payment(order)\n\n        with logfire.span(\"send_confirmation\"):\n            await send_confirmation(order)\n</code></pre>"},{"location":"observability/#logging","title":"Logging","text":"<p>Logfire integrates with Python's logging:</p> Python<pre><code>import logfire\n\nlogfire.info(\"User registered\", user_id=user.id, email=user.email)\nlogfire.warning(\"Rate limit approaching\", current=95, limit=100)\nlogfire.error(\"Payment failed\", order_id=order.id, error=str(e))\n</code></pre>"},{"location":"observability/#metrics","title":"Metrics","text":"<p>Track custom metrics:</p> Python<pre><code>import logfire\n\n# Counter\nlogfire.metric_counter(\"orders_processed\", 1, tags={\"status\": \"success\"})\n\n# Gauge\nlogfire.metric_gauge(\"queue_depth\", queue.size())\n\n# Histogram\nlogfire.metric_histogram(\"response_time\", latency_ms)\n</code></pre>"},{"location":"observability/#best-practices","title":"Best Practices","text":""},{"location":"observability/#1-use-structured-logging","title":"1. Use Structured Logging","text":"Python<pre><code># Good - structured data\nlogfire.info(\"Order created\", order_id=order.id, total=order.total)\n\n# Avoid - string interpolation\nlogfire.info(f\"Order {order.id} created with total {order.total}\")\n</code></pre>"},{"location":"observability/#2-add-context-to-spans","title":"2. Add Context to Spans","text":"Python<pre><code>with logfire.span(\"api_call\",\n    service=\"payment-gateway\",\n    operation=\"charge\",\n    amount=order.total\n):\n    result = await payment_api.charge(order)\n</code></pre>"},{"location":"observability/#3-handle-errors-properly","title":"3. Handle Errors Properly","text":"Python<pre><code>try:\n    result = await risky_operation()\nexcept Exception as e:\n    logfire.exception(\"Operation failed\", operation=\"risky\")\n    raise\n</code></pre>"},{"location":"observability/#4-use-tags-for-filtering","title":"4. Use Tags for Filtering","text":"Python<pre><code>logfire.info(\"Request processed\",\n    environment=settings.ENVIRONMENT,\n    version=settings.VERSION,\n    user_tier=user.subscription_tier\n)\n</code></pre>"},{"location":"observability/#viewing-data","title":"Viewing Data","text":""},{"location":"observability/#logfire-dashboard","title":"Logfire Dashboard","text":"<p>Access your traces at logfire.pydantic.dev:</p> <ol> <li>Live Tail - Real-time log streaming</li> <li>Trace Explorer - Distributed trace visualization</li> <li>Query Builder - SQL-like queries on your data</li> <li>Dashboards - Custom visualizations</li> </ol>"},{"location":"observability/#example-queries","title":"Example Queries","text":"SQL<pre><code>-- Slow API endpoints\nSELECT path, avg(duration_ms) as avg_latency\nFROM spans\nWHERE service = 'fastapi'\nGROUP BY path\nORDER BY avg_latency DESC\nLIMIT 10\n\n-- Failed AI agent runs\nSELECT *\nFROM spans\nWHERE span_name = 'agent.run'\n  AND status = 'error'\nORDER BY timestamp DESC\n\n-- Token usage by model\nSELECT model, sum(tokens_used) as total_tokens\nFROM spans\nWHERE span_name LIKE 'llm.%'\nGROUP BY model\n</code></pre>"},{"location":"observability/#troubleshooting","title":"Troubleshooting","text":""},{"location":"observability/#no-data-appearing","title":"No Data Appearing","text":"<ol> <li>Check <code>LOGFIRE_TOKEN</code> is set correctly</li> <li>Verify network connectivity to Logfire</li> <li>Check for initialization errors in logs</li> </ol>"},{"location":"observability/#missing-spans","title":"Missing Spans","text":"<ol> <li>Ensure instrumentation is called after app creation</li> <li>Check that the library version is compatible</li> <li>Verify the component is actually being used</li> </ol>"},{"location":"observability/#high-cardinality-warnings","title":"High Cardinality Warnings","text":"<ol> <li>Avoid dynamic values in span names</li> <li>Use tags/attributes for variable data</li> <li>Consider sampling for high-volume endpoints</li> </ol>"},{"location":"observability/#resources","title":"Resources","text":"<ul> <li>Logfire Documentation</li> <li>Integrations Guide</li> <li>PydanticAI Integration</li> <li>FastAPI Integration</li> <li>OpenTelemetry Compatibility</li> </ul>"},{"location":"concepts/","title":"Core Concepts","text":"<p>FastAPI Fullstack generates production-ready applications with a clean, layered architecture.</p>"},{"location":"concepts/#architecture-overview","title":"Architecture Overview","text":"<pre><code>graph TB\n    subgraph Frontend[\"Frontend (Next.js 15)\"]\n        UI[React Components]\n        WS[WebSocket Client]\n        Store[Zustand Stores]\n    end\n\n    subgraph Backend[\"Backend (FastAPI)\"]\n        API[API Routes]\n        Services[Services Layer]\n        Repos[Repositories]\n        Agent[AI Agent]\n    end\n\n    subgraph Infrastructure\n        DB[(PostgreSQL/MongoDB)]\n        Redis[(Redis)]\n        Queue[Celery/Taskiq]\n    end\n\n    UI --&gt; API\n    WS &lt;--&gt; Agent\n    API --&gt; Services\n    Services --&gt; Repos\n    Services --&gt; Agent\n    Repos --&gt; DB\n    Services --&gt; Redis\n    Services --&gt; Queue</code></pre>"},{"location":"concepts/#key-concepts","title":"Key Concepts","text":"<ul> <li> <p> Architecture</p> <p>Repository + Service pattern, dependency injection, and layered design.</p> </li> <li> <p> AI Agents</p> <p>PydanticAI, LangChain, LangGraph, CrewAI with WebSocket streaming.</p> </li> <li> <p> Frontend</p> <p>Next.js 15, React 19, TypeScript, Tailwind CSS, and Zustand.</p> </li> </ul>"},{"location":"concepts/#design-principles","title":"Design Principles","text":""},{"location":"concepts/#1-separation-of-concerns","title":"1. Separation of Concerns","text":"<p>Each layer has a single responsibility:</p> Layer Responsibility Routes HTTP handling, validation, auth Services Business logic, orchestration Repositories Data access, queries"},{"location":"concepts/#2-dependency-injection","title":"2. Dependency Injection","text":"<p>FastAPI's dependency injection system is used throughout:</p> Python<pre><code>@router.get(\"/users/{user_id}\")\nasync def get_user(\n    user_id: int,\n    service: UserService = Depends(get_user_service),\n) -&gt; UserResponse:\n    return await service.get_user(user_id)\n</code></pre>"},{"location":"concepts/#3-type-safety","title":"3. Type Safety","text":"<p>Full type annotations with Pydantic models:</p> Python<pre><code>class UserCreate(BaseModel):\n    email: EmailStr\n    password: str\n\nclass UserResponse(BaseModel):\n    id: int\n    email: EmailStr\n    created_at: datetime\n</code></pre>"},{"location":"concepts/#next-steps","title":"Next Steps","text":"<ul> <li>Architecture - Deep dive into project structure</li> <li>AI Agents - Configure AI frameworks</li> <li>Frontend - Frontend architecture and patterns</li> </ul>"},{"location":"guides/","title":"Guides","text":"<p>Step-by-step guides to help you get the most out of FastAPI Fullstack.</p>"},{"location":"guides/#getting-started","title":"Getting Started","text":"<ul> <li> <p> Quick Start</p> <p>Create your first project and start development in minutes.</p> </li> <li> <p> Configuration</p> <p>Learn about all available configuration options.</p> </li> </ul>"},{"location":"guides/#deployment","title":"Deployment","text":"<ul> <li> <p> Deployment</p> <p>Deploy to Docker, Kubernetes, and cloud platforms.</p> </li> </ul>"},{"location":"guides/#development","title":"Development","text":"<ul> <li> <p> Development</p> <p>Local development setup, testing, and debugging.</p> </li> </ul>"},{"location":"guides/configuration/","title":"Configuration","text":"<p>All available options when generating a project.</p>"},{"location":"guides/configuration/#core-options","title":"Core Options","text":"Option Values Description <code>--database</code> <code>postgresql</code>, <code>mongodb</code>, <code>sqlite</code>, <code>none</code> Database backend (async by default) <code>--orm</code> <code>sqlalchemy</code>, <code>sqlmodel</code> ORM choice (SQLModel for simplified syntax) <code>--auth</code> <code>jwt</code>, <code>api_key</code>, <code>both</code>, <code>none</code> Authentication method <code>--oauth</code> <code>none</code>, <code>google</code> OAuth2 social login <code>--ai-framework</code> <code>pydantic_ai</code>, <code>langchain</code> AI agent framework <code>--llm-provider</code> <code>openai</code>, <code>anthropic</code>, <code>openrouter</code> LLM provider <code>--background-tasks</code> <code>none</code>, <code>celery</code>, <code>taskiq</code>, <code>arq</code> Background task queue <code>--frontend</code> <code>none</code>, <code>nextjs</code> Frontend framework"},{"location":"guides/configuration/#presets","title":"Presets","text":"Bash<pre><code># Full production setup\nfastapi-fullstack create my_app --preset production\n\n# AI agent with streaming\nfastapi-fullstack create my_app --preset ai-agent\n\n# Minimal project\nfastapi-fullstack create my_app --minimal\n</code></pre>"},{"location":"guides/configuration/#ai-framework-options","title":"AI Framework Options","text":""},{"location":"guides/configuration/#pydanticai","title":"PydanticAI","text":"Bash<pre><code>fastapi-fullstack create my_app \\\n  --ai-agent \\\n  --ai-framework pydantic_ai \\\n  --llm-provider openai\n</code></pre> <p>Supported providers: <code>openai</code>, <code>anthropic</code>, <code>openrouter</code></p>"},{"location":"guides/configuration/#langchain","title":"LangChain","text":"Bash<pre><code>fastapi-fullstack create my_app \\\n  --ai-agent \\\n  --ai-framework langchain \\\n  --llm-provider anthropic\n</code></pre> <p>Supported providers: <code>openai</code>, <code>anthropic</code></p>"},{"location":"guides/configuration/#database-options","title":"Database Options","text":""},{"location":"guides/configuration/#postgresql-recommended","title":"PostgreSQL (recommended)","text":"Bash<pre><code>fastapi-fullstack create my_app --database postgresql\n</code></pre> <ul> <li>Async via <code>asyncpg</code></li> <li>Connection pooling</li> <li>Full SQL features</li> </ul>"},{"location":"guides/configuration/#mongodb","title":"MongoDB","text":"Bash<pre><code>fastapi-fullstack create my_app --database mongodb\n</code></pre> <ul> <li>Async via <code>Motor</code></li> <li>Beanie ODM</li> <li>Flexible schema</li> </ul>"},{"location":"guides/configuration/#integrations","title":"Integrations","text":"<p>Enable during project generation:</p> Bash<pre><code>fastapi-fullstack new\n# \u2713 Redis (caching/sessions)\n# \u2713 Rate limiting (slowapi)\n# \u2713 Pagination\n# \u2713 Admin Panel (SQLAdmin)\n# \u2713 Webhooks\n# \u2713 Sentry\n# \u2713 Logfire / LangSmith\n# \u2713 Prometheus\n</code></pre>"},{"location":"guides/configuration/#environment-variables","title":"Environment Variables","text":"<p>Generated projects use <code>.env</code> files:</p> Bash<pre><code># Database\nDATABASE_URL=postgresql+asyncpg://user:pass@localhost/db\n\n# Auth\nJWT_SECRET_KEY=your-secret-key\nJWT_ALGORITHM=HS256\n\n# AI\nOPENAI_API_KEY=sk-...\nANTHROPIC_API_KEY=sk-ant-...\n\n# Observability\nLOGFIRE_TOKEN=...\nSENTRY_DSN=...\n</code></pre>"},{"location":"guides/configuration/#next-steps","title":"Next Steps","text":"<ul> <li>Quick Start - Run your project</li> <li>AI Agents - Configure AI frameworks</li> <li>Deployment - Deploy to production</li> </ul>"},{"location":"guides/quick-start/","title":"Quick Start","text":"<p>Get your AI application running in 5 minutes.</p>"},{"location":"guides/quick-start/#1-create-a-project","title":"1. Create a Project","text":"Bash<pre><code># Interactive wizard (recommended)\nfastapi-fullstack new\n\n# Or use the AI agent preset\nfastapi-fullstack create my_app --preset ai-agent\n</code></pre>"},{"location":"guides/quick-start/#2-install-dependencies","title":"2. Install Dependencies","text":"Bash<pre><code>cd my_app\nmake install\n</code></pre> <p>Windows Users</p> <p>The <code>make</code> command requires GNU Make. Install via Chocolatey (<code>choco install make</code>), use WSL, or run commands manually from the Makefile.</p>"},{"location":"guides/quick-start/#3-start-the-database","title":"3. Start the Database","text":"Bash<pre><code># PostgreSQL with Docker\nmake docker-db\n</code></pre>"},{"location":"guides/quick-start/#4-run-migrations","title":"4. Run Migrations","text":"Bash<pre><code># Create initial migration\nmake db-migrate\n# Enter message: \"Initial migration\"\n\n# Apply migrations\nmake db-upgrade\n</code></pre>"},{"location":"guides/quick-start/#5-create-admin-user","title":"5. Create Admin User","text":"Bash<pre><code>make create-admin\n# Enter email and password when prompted\n</code></pre>"},{"location":"guides/quick-start/#6-start-the-backend","title":"6. Start the Backend","text":"Bash<pre><code>make run\n</code></pre>"},{"location":"guides/quick-start/#7-start-the-frontend","title":"7. Start the Frontend","text":"<p>Open a new terminal:</p> Bash<pre><code>cd frontend\nbun install\nbun dev\n</code></pre>"},{"location":"guides/quick-start/#access-your-application","title":"Access Your Application","text":"Service URL API http://localhost:8000 API Docs http://localhost:8000/docs Admin Panel http://localhost:8000/admin Frontend http://localhost:3000"},{"location":"guides/quick-start/#using-docker","title":"Using Docker","text":"<p>Run everything in containers:</p> Bash<pre><code>make docker-up       # Start backend + database\nmake docker-frontend # Start frontend\n</code></pre>"},{"location":"guides/quick-start/#project-cli","title":"Project CLI","text":"<p>Each generated project has a CLI:</p> Bash<pre><code>cd backend\n\n# Server commands\nuv run my_app server run --reload\n\n# Database commands\nuv run my_app db migrate -m \"Add users\"\nuv run my_app db upgrade\n\n# User commands\nuv run my_app user create-admin\n</code></pre>"},{"location":"guides/quick-start/#next-steps","title":"Next Steps","text":"<ul> <li>Configuration - Customize your project</li> <li>AI Agents - Set up AI frameworks</li> <li>Deployment - Deploy to production</li> </ul>"}]}